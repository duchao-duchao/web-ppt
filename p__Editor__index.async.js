"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[131],{73499:function(Ze,M,n){n.r(M),n.d(M,{default:function(){return be}});var Ae=n(67294),T=n(26058),N={layout:"layout___DVKVb",leftSider:"leftSider___QCJe3",rightSider:"rightSider___LMycZ"},Y=n(45322),K=n(97857),y=n.n(K),Z=n(65337),Q=n(98265),E={slideList:"slideList___pRXQL",actions:"actions___VUtql",list:"list___iIzRx",slideItem:"slideItem___Xm5Ym",active:"active___kASHc",thumbnail:"thumbnail___RhvES",thumbnailBackground:"thumbnailBackground___xvR5Z",thumbnailElements:"thumbnailElements___ijuBy",thumbnailIndex:"thumbnailIndex___e4uOo"},e=n(85893),G=function(a){var v,l,d=a.slide,c=a.scale,m=a.slideIndex,S=function(t){var u,s,i,r,x,f,h,C,o,I,A={position:"absolute",left:(t.x||t.left||0)*c,top:(t.y||t.top||0)*c,width:t.width*c,height:t.height*c,transform:t.rotation?"rotate(".concat(t.rotation,"deg)"):"none"};switch(t.type){case"text":return(0,e.jsx)("div",{style:y()(y()({},A),{},{color:((u=t.style)===null||u===void 0?void 0:u.color)||"#000000",fontSize:(((s=t.style)===null||s===void 0?void 0:s.fontSize)||16)*c,fontWeight:((i=t.style)===null||i===void 0?void 0:i.fontWeight)||"normal",fontStyle:((r=t.style)===null||r===void 0?void 0:r.fontStyle)||"normal",textAlign:((x=t.style)===null||x===void 0?void 0:x.textAlign)||"left",display:"flex",alignItems:"center",justifyContent:((f=t.style)===null||f===void 0?void 0:f.textAlign)==="center"?"center":((h=t.style)===null||h===void 0?void 0:h.textAlign)==="right"?"flex-end":"flex-start",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),children:t.content||"Text"},t.id);case"image":return(0,e.jsx)("img",{src:t.content||"",alt:"",style:y()(y()({},A),{},{objectFit:"cover"})},t.id);case"shape":var R=t.content||"circle",X=((C=t.style)===null||C===void 0?void 0:C.fill)||"#4096ff",b=((o=t.style)===null||o===void 0?void 0:o.stroke)||"#1677ff",g=(((I=t.style)===null||I===void 0?void 0:I.strokeWidth)||2)*c;return(0,e.jsx)("div",{style:A,children:B(R,X,b,g)},t.id);default:return null}},B=function(t,u,s,i){var r={width:"100%",height:"100%"};switch(t){case"circle":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:u,stroke:s,strokeWidth:i})});case"triangle":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:u,stroke:s,strokeWidth:i})});case"diamond":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,50 50,90 10,50",fill:u,stroke:s,strokeWidth:i})});case"star":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,2 30,18 47,18 34,28 39,44 25,35 11,44 16,28 3,18 20,18",fill:u,stroke:s,strokeWidth:i})});case"arrow-right":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"5,15 5,35 35,35 35,45 45,25 35,5 35,15",fill:u,stroke:s,strokeWidth:i})});case"hexagon":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"15,8 35,8 45,25 35,42 15,42 5,25",fill:u,stroke:s,strokeWidth:i})});case"heart":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M25,42 C25,42 10,30 10,20 C10,12 15,8 22,8 C23,8 25,10 25,10 C25,10 27,8 28,8 C35,8 40,12 40,20 C40,30 25,42 25,42 Z",fill:u,stroke:s,strokeWidth:i})});case"pentagon":return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,5 45,18 38,42 12,42 5,18",fill:u,stroke:s,strokeWidth:i})});default:return(0,e.jsx)("svg",{style:r,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:u,stroke:s,strokeWidth:i})})}};return(0,e.jsxs)("div",{className:E.thumbnail,children:[(0,e.jsx)("div",{className:E.thumbnailBackground,style:{backgroundColor:((v=d.background)===null||v===void 0?void 0:v.color)||"#ffffff",backgroundImage:(l=d.background)!==null&&l!==void 0&&l.image?"url(".concat(d.background.image,")"):"none",backgroundSize:"cover",backgroundPosition:"center"}}),(0,e.jsx)("div",{className:E.thumbnailElements,children:d.elements.map(S)}),(0,e.jsx)("div",{className:E.thumbnailIndex,children:m+1})]})},q=function(){var a=(0,Z.L)(),v=a.slides,l=a.currentSlideIndex,d=a.addSlide,c=a.deleteSlide,m=a.setCurrentSlideIndex,S=110,B=62,w=800,t=480,u=S/w,s=B/t,i=Math.min(u,s);return(0,e.jsxs)("div",{className:E.slideList,children:[(0,e.jsx)("div",{className:E.actions,children:(0,e.jsx)(Q.ZP,{onClick:d,block:!0,style:{borderRadius:5},children:"\u6DFB\u52A0\u5E7B\u706F\u7247"})}),(0,e.jsx)("div",{className:E.list,children:v.map(function(r,x){return(0,e.jsx)("div",{className:"".concat(E.slideItem," ").concat(x===l?E.active:""),onClick:function(){return m(x)},children:(0,e.jsx)(G,{slide:r,scale:i,slideIndex:x})},r.id)})})]})},_=q,ee=n(46020),U=n.n(ee),te=function(){var a=(0,Z.L)(),v=a.slides,l=a.currentSlideIndex,d=a.selectedElementIds,c=a.loadState,m=function(){window.open("/preview")},S=function(){var u=document.querySelector(".leafer-canvas");u&&U()(u).then(function(s){var i=document.createElement("a");i.download="slide.png",i.href=s.toDataURL(),i.click()})},B=function(){var u={slides:v,currentSlideIndex:l,selectedElementIds:d},s=new Blob([JSON.stringify(u)],{type:"application/json"}),i=URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download="presentation.json",r.click(),URL.revokeObjectURL(i)},w=function(u){var s=new FileReader;return s.onload=function(i){var r,x=(r=i.target)===null||r===void 0?void 0:r.result;if(typeof x=="string"){var f=JSON.parse(x);c(f)}},s.readAsText(u),!1};return(0,e.jsx)("div",{style:{padding:"11px",backgroundColor:"#ffffff",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",height:"40px"},children:(0,e.jsx)("div",{})})},ne=te,W=n(78957),le=n(74627),re=n(19632),D=n.n(re),ie=n(3341),oe=(0,ie.U)(function(p,a){return{undoStack:[],redoStack:[],execute:function(l){l.execute(),p(function(d){return{undoStack:[].concat(D()(d.undoStack),[l]),redoStack:[]}})},undo:function(){var l=a(),d=l.undoStack,c=l.redoStack;if(d.length>0){var m=d[d.length-1];m.undo(),p({undoStack:d.slice(0,-1),redoStack:[m].concat(D()(c))})}},redo:function(){var l=a(),d=l.undoStack,c=l.redoStack;if(c.length>0){var m=c[0];m.execute(),p({undoStack:[].concat(D()(d),[m]),redoStack:c.slice(1)})}}}}),ae=n(12444),se=n.n(ae),de=n(72004),ue=n.n(de),ce=n(9783),L=n.n(ce),z=function(){function p(a){se()(this,p),L()(this,"element",void 0),L()(this,"elementId",null),this.element=a}return ue()(p,[{key:"execute",value:function(){var v=Z.L.getState(),l=v.addElement,d=v.selectedElementIds;l(this.element);var c=Z.L.getState().selectedElementIds;this.elementId=c[0]}},{key:"undo",value:function(){var v=this;if(this.elementId){var l=Z.L.getState(),d=l.slides,c=l.currentSlideIndex,m=l.updateCurrentSlide,S=d[c],B=y()(y()({},S),{},{elements:S.elements.filter(function(w){return w.id!==v.elementId})});m(B)}}}]),p}(),he=[{type:"circle",name:"\u5706\u5F62",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})},{type:"triangle",name:"\u4E09\u89D2\u5F62",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("polygon",{points:"25,5 45,40 5,40",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})},{type:"diamond",name:"\u83F1\u5F62",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("polygon",{points:"25,5 45,25 25,45 5,25",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})},{type:"star",name:"\u661F\u5F62",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("polygon",{points:"25,2 30,18 47,18 34,28 39,44 25,35 11,44 16,28 3,18 20,18",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})},{type:"arrow-right",name:"\u53F3\u7BAD\u5934",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("polygon",{points:"5,15 5,35 35,35 35,45 45,25 35,5 35,15",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})},{type:"hexagon",name:"\u516D\u8FB9\u5F62",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("polygon",{points:"15,8 35,8 45,25 35,42 15,42 5,25",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})},{type:"heart",name:"\u5FC3\u5F62",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("path",{d:"M25,42 C25,42 10,30 10,20 C10,12 15,8 22,8 C23,8 25,10 25,10 C25,10 27,8 28,8 C35,8 40,12 40,20 C40,30 25,42 25,42 Z",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})},{type:"pentagon",name:"\u4E94\u8FB9\u5F62",svg:(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 50 50",children:(0,e.jsx)("polygon",{points:"25,5 45,18 38,42 12,42 5,18",fill:"#4096ff",stroke:"#1677ff",strokeWidth:"1"})})}],ve=function(){var a=oe(),v=a.execute,l=(0,Z.L)(),d=l.slides,c=l.currentSlideIndex,m=l.selectedElementIds,S=l.loadState,B=function(){var f=new z({type:"text",left:150,top:150,width:150,height:50,content:"Hello World",style:{color:"#000000",fontSize:24}});v(f)},w=function(f){var h=new z({type:"shape",left:200,top:200,width:100,height:100,content:f,style:{fill:"#4096ff",stroke:"#1677ff",strokeWidth:2}});v(h)},t=function(){window.open("/preview")},u=function(){var f=document.querySelector(".leafer-canvas");f&&U()(f).then(function(h){var C=document.createElement("a");C.download="slide.png",C.href=h.toDataURL(),C.click()})},s=function(){var f={slides:d,currentSlideIndex:c,selectedElementIds:m},h=new Blob([JSON.stringify(f)],{type:"application/json"}),C=URL.createObjectURL(h),o=document.createElement("a");o.href=C,o.download="presentation.json",o.click(),URL.revokeObjectURL(C)},i=function(f){var h=new FileReader;return h.onload=function(C){var o,I=(o=C.target)===null||o===void 0?void 0:o.result;if(typeof I=="string"){var A=JSON.parse(I);S(A)}},h.readAsText(f),!1},r=(0,e.jsx)("div",{style:{display:"flex"},children:he.map(function(x){return(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"2px",cursor:"pointer",transition:"all 0.2s"},onClick:function(){return w(x.type)},onMouseEnter:function(h){h.currentTarget.style.backgroundColor="#f0f0f0",h.currentTarget.style.borderColor="#1677ff"},onMouseLeave:function(h){h.currentTarget.style.backgroundColor="transparent",h.currentTarget.style.borderColor="#d9d9d9"},children:x.svg},x.type)})});return(0,e.jsxs)("div",{style:{padding:"11px",backgroundColor:"#ffffff",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,e.jsxs)(W.Z,{children:[(0,e.jsx)("div",{style:{cursor:"pointer"},onClick:B,children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",children:[(0,e.jsx)("path",{d:"M8 10.9333L8 6H40V10.9333",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),(0,e.jsx)("path",{d:"M24 6V42",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),(0,e.jsx)("path",{d:"M16 42H32",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})]})}),(0,e.jsx)(le.Z,{content:r,trigger:"hover",placement:"bottomRight",children:(0,e.jsx)("div",{style:{cursor:"pointer"},children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",fill:"none",children:[(0,e.jsx)("path",{d:"M19 32C11.268 32 5 25.732 5 18C5 10.268 11.268 4 19 4C26.732 4 33 10.268 33 18",stroke:"currentColor","stroke-width":"4","stroke-linejoin":"round"}),(0,e.jsx)("path",{d:"M44 18H18V44H44V18Z",fill:"none",stroke:"currentColor","stroke-width":"4","stroke-linejoin":"round"})]})})})]}),(0,e.jsx)("div",{})]})},xe=ve,fe=n(11665),O=n(34407),$=n(66037),j=n(84896),P=n(83830),V=n(86744),F=n(37804),ge=n(96074),H=O.Z.Title,me=O.Z.Text,ye=function(){var a,v,l,d,c,m=(0,Z.L)(),S=m.selectedElementIds,B=m.slides,w=m.currentSlideIndex,t=m.updateElement,u=m.updateCurrentSlide;if(S.length!==1){var s,i,r=B[w],x=function(g){var k=typeof g=="string"?g:g.toHexString();u({background:y()(y()({},r.background),{},{color:k})})},f=function(g){u({background:y()(y()({},r.background),{},{image:g.target.value})})};return(0,e.jsx)($.Z,{style:{height:"100%"},bodyStyle:{padding:"16px"},children:(0,e.jsxs)(j.Z,{layout:"vertical",size:"small",children:[(0,e.jsx)(H,{level:5,style:{margin:"0 0 12px 0",fontSize:"14px"},children:"\u80CC\u666F\u6837\u5F0F"}),(0,e.jsx)(j.Z.Item,{label:"\u80CC\u666F\u989C\u8272",style:{marginBottom:"16px"},children:(0,e.jsx)(P.Z,{value:((s=r.background)===null||s===void 0?void 0:s.color)||"#ffffff",onChange:x,showText:!0,style:{width:"100%"}})}),(0,e.jsx)(j.Z.Item,{label:"\u80CC\u666F\u56FE\u7247URL",style:{marginBottom:"16px"},children:(0,e.jsx)(V.Z,{value:((i=r.background)===null||i===void 0?void 0:i.image)||"",onChange:f,placeholder:"\u8BF7\u8F93\u5165\u80CC\u666F\u56FE\u7247URL"})})]})})}var h=S[0],C=B[w],o=C.elements.find(function(b){return b.id===h});if(!o)return(0,e.jsx)($.Z,{title:"\u5C5E\u6027\u9762\u677F",style:{height:"100%"},children:(0,e.jsx)("div",{style:{textAlign:"center",color:"#999",padding:"40px 0"},children:(0,e.jsx)(me,{type:"secondary",children:"\u672A\u627E\u5230\u5143\u7D20"})})});var I=function(g){return function(k){k!==null&&t(h,L()({},g,k))}},A=function(g){return function(k){t(h,L()({},g,k.target.value))}},R=function(g){return function(k){var Ee=typeof k=="string"?k:k.toHexString();t(h,{style:y()(y()({},o.style),{},L()({},g,Ee))})}},X=function(g){var k={text:"\u6587\u672C",image:"\u56FE\u7247",shape:"\u56FE\u5F62"};return k[g]||g};return(0,e.jsx)($.Z,{style:{height:"100%"},bodyStyle:{padding:"16px"},children:(0,e.jsxs)(j.Z,{layout:"vertical",size:"small",children:[(0,e.jsx)(H,{level:5,style:{margin:"0 0 12px 0",fontSize:"14px"},children:"\u4F4D\u7F6E\u548C\u5C3A\u5BF8"}),(0,e.jsxs)(W.Z.Compact,{style:{width:"100%",marginBottom:"12px"},children:[(0,e.jsx)(j.Z.Item,{label:"\u5BBD\u5EA6",style:{flex:1,marginBottom:0,marginRight:"8px"},children:(0,e.jsx)(F.Z,{value:o.width,onChange:I("width"),min:1,style:{width:"100%"},placeholder:"\u5BBD\u5EA6"})}),(0,e.jsx)(j.Z.Item,{label:"\u9AD8\u5EA6",style:{flex:1,marginBottom:0},children:(0,e.jsx)(F.Z,{value:o.height,onChange:I("height"),min:1,style:{width:"100%"},placeholder:"\u9AD8\u5EA6"})})]}),(0,e.jsxs)(W.Z.Compact,{style:{width:"100%",marginBottom:"16px"},children:[(0,e.jsx)(j.Z.Item,{label:"X\u5750\u6807",style:{flex:1,marginBottom:0,marginRight:"8px"},children:(0,e.jsx)(F.Z,{value:o.x,onChange:I("x"),style:{width:"100%"},placeholder:"X\u5750\u6807"})}),(0,e.jsx)(j.Z.Item,{label:"Y\u5750\u6807",style:{flex:1,marginBottom:0},children:(0,e.jsx)(F.Z,{value:o.y,onChange:I("y"),style:{width:"100%"},placeholder:"Y\u5750\u6807"})})]}),(0,e.jsx)(ge.Z,{style:{margin:"16px 0"}}),o.type==="text"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H,{level:5,style:{margin:"0 0 12px 0",fontSize:"14px"},children:"\u6587\u672C\u5185\u5BB9"}),(0,e.jsx)(j.Z.Item,{label:"\u6587\u672C\u5185\u5BB9",style:{marginBottom:"16px"},children:(0,e.jsx)(V.Z.TextArea,{value:o.content||"",onChange:A("content"),placeholder:"\u8BF7\u8F93\u5165\u6587\u672C\u5185\u5BB9",rows:3})}),(0,e.jsx)(j.Z.Item,{label:"\u5B57\u4F53\u5927\u5C0F",style:{marginBottom:"16px"},children:(0,e.jsx)(F.Z,{value:((a=o.style)===null||a===void 0?void 0:a.fontSize)||16,onChange:function(g){g!==null&&t(h,{style:y()(y()({},o.style),{},{fontSize:g})})},min:8,max:200,style:{width:"100%"},placeholder:"\u5B57\u4F53\u5927\u5C0F"})}),(0,e.jsx)(j.Z.Item,{label:"\u6587\u5B57\u989C\u8272",style:{marginBottom:"16px"},children:(0,e.jsx)(P.Z,{value:((v=o.style)===null||v===void 0?void 0:v.color)||"#000000",onChange:R("color"),showText:!0,style:{width:"100%"}})})]}),o.type==="shape"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H,{level:5,style:{margin:"0 0 12px 0",fontSize:"14px"},children:"\u56FE\u5F62\u6837\u5F0F"}),(0,e.jsx)(j.Z.Item,{label:"\u586B\u5145\u989C\u8272",style:{marginBottom:"12px"},children:(0,e.jsx)(P.Z,{value:((l=o.style)===null||l===void 0?void 0:l.fill)||"#4096ff",onChange:R("fill"),showText:!0,style:{width:"100%"}})}),(0,e.jsx)(j.Z.Item,{label:"\u8FB9\u6846\u989C\u8272",style:{marginBottom:"12px"},children:(0,e.jsx)(P.Z,{value:((d=o.style)===null||d===void 0?void 0:d.stroke)||"#1677ff",onChange:R("stroke"),showText:!0,style:{width:"100%"}})}),(0,e.jsx)(j.Z.Item,{label:"\u8FB9\u6846\u5BBD\u5EA6",style:{marginBottom:"16px"},children:(0,e.jsx)(F.Z,{value:((c=o.style)===null||c===void 0?void 0:c.strokeWidth)||2,onChange:function(g){g!==null&&t(h,{style:y()(y()({},o.style),{},{strokeWidth:g})})},min:0,max:20,style:{width:"100%"},placeholder:"\u8FB9\u6846\u5BBD\u5EA6"})})]})]})})},pe=ye,je=function(){return(0,e.jsx)("div",{children:(0,e.jsx)("h2",{children:"\u52A8\u753B\u8BBE\u7F6E"})})},Ce=je,Se={},ke=function(){return(0,e.jsx)("div",{className:Se.right,children:(0,e.jsx)(fe.Z,{defaultActiveKey:"1",tabBarStyle:{padding:"0 16px"},items:[{label:"\u6837\u5F0F",key:"1",children:(0,e.jsx)(pe,{})},{label:"\u52A8\u753B",key:"2",children:(0,e.jsx)(Ce,{})}]})})},Be=ke,J=T.Z.Sider,we=T.Z.Content,Ie=function(){return(0,e.jsxs)(T.Z,{className:N.layout,children:[(0,e.jsx)(ne,{}),(0,e.jsxs)(T.Z,{children:[(0,e.jsx)(J,{width:160,className:N.leftSider,children:(0,e.jsx)(_,{})}),(0,e.jsxs)(we,{children:[(0,e.jsx)(xe,{}),(0,e.jsx)(Y.Z,{})]}),(0,e.jsx)(J,{width:260,className:N.rightSider,children:(0,e.jsx)(Be,{})})]})]})},be=Ie}}]);
