"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[322],{45322:function(Ce,fe,g){g.d(fe,{Z:function(){return ce}});var he=g(97857),z=g.n(he),ve=g(19632),pe=g.n(ve),xe=g(5574),o=g.n(xe),w=g(67294),M=g(16864),Q=g(50136),b=g(89609),e=g(85893),ye=function(n){var t=n.x,a=n.y,f=n.visible,p=n.onClose,v=n.onSelect,c=(0,e.jsxs)(Q.Z,{onClick:function(y){var R=y.key;return v(R)},children:[(0,e.jsx)(Q.Z.Item,{children:"\u590D\u5236"},"copy"),(0,e.jsx)(Q.Z.Item,{children:"\u7C98\u8D34"},"paste"),(0,e.jsx)(Q.Z.Item,{children:"\u5220\u9664"},"delete"),(0,e.jsx)(Q.Z.Divider,{}),(0,e.jsx)(Q.Z.Item,{children:"\u4E0A\u79FB\u4E00\u5C42"},"bringForward"),(0,e.jsx)(Q.Z.Item,{children:"\u4E0B\u79FB\u4E00\u5C42"},"sendBackward")]});return f?(0,e.jsx)("div",{style:{position:"fixed",left:t,top:a,zIndex:1e3},onMouseLeave:p,children:(0,e.jsx)(b.Z,{overlay:c,open:f,onOpenChange:function(y){return!y&&p()},children:(0,e.jsx)("div",{})})}):null},me=ye,ge=function(n){var t=n.element,a=n.isSelected,f=n.onSelect,p=(0,w.useState)(!1),v=o()(p,2),c=v[0],d=v[1],y=(0,w.useState)(!1),R=o()(y,2),S=R[0],E=R[1],T=(0,w.useState)({x:0,y:0}),N=o()(T,2),ee=N[0],te=N[1],O=(0,w.useState)({x:0,y:0,width:0,height:0,left:0,top:0}),re=o()(O,2),h=re[0],ke=re[1],de=(0,w.useState)(""),I=o()(de,2),D=I[0],ne=I[1],G=(0,w.useState)(!1),X=o()(G,2),Z=X[0],U=X[1],K=(0,w.useRef)(null),ue=(0,w.useState)({startAngle:0,initialRotation:0}),ie=o()(ue,2),se=ie[0],W=ie[1],oe=(0,M.L)(),J=oe.updateElement,Y=oe.pause,V=oe.resume,je=(0,w.useCallback)(function(x){if(t.type==="text"&&a&&x.target!==x.currentTarget){x.stopPropagation();return}x.preventDefault(),x.stopPropagation(),Y(),d(!0),te({x:x.clientX,y:x.clientY}),f(t.id,x)},[t.id,t.type,a,f,Y]),le=(0,w.useCallback)(function(x,k){x.preventDefault(),x.stopPropagation(),Y(),E(!0),ne(k),ke({x:x.clientX,y:x.clientY,width:t.width,height:t.height,left:t.x||t.left||0,top:t.y||t.top||0})},[t,Y]),ae=(0,w.useCallback)(function(x){var k;x.preventDefault(),x.stopPropagation();var m=(k=K.current)===null||k===void 0?void 0:k.getBoundingClientRect();if(m){Y(),U(!0);var j=m.left+m.width/2,A=m.top+m.height/2,i=Math.atan2(x.clientY-A,x.clientX-j)*180/Math.PI;W({startAngle:i,initialRotation:t.rotation||0})}},[Y,t.rotation]),u=(0,w.useCallback)(function(x){if(c){var k=x.clientX-ee.x,m=x.clientY-ee.y;J(t.id,{left:(t.x||t.left||0)+k,top:(t.y||t.top||0)+m}),te({x:x.clientX,y:x.clientY})}else if(S){var j=x.clientX-h.x,A=x.clientY-h.y,i=h.width,s=h.height,r=h.left,l=h.top;switch(D){case"top-left":i=Math.max(20,h.width-j),s=Math.max(20,h.height-A),r=h.left+(h.width-i),l=h.top+(h.height-s);break;case"top-right":i=Math.max(20,h.width+j),s=Math.max(20,h.height-A),l=h.top+(h.height-s);break;case"bottom-left":i=Math.max(20,h.width-j),s=Math.max(20,h.height+A),r=h.left+(h.width-i);break;case"bottom-right":i=Math.max(20,h.width+j),s=Math.max(20,h.height+A);break;case"top-center":s=Math.max(20,h.height-A),l=h.top+(h.height-s);break;case"bottom-center":s=Math.max(20,h.height+A);break;case"left-center":i=Math.max(20,h.width-j),r=h.left+(h.width-i);break;case"right-center":i=Math.max(20,h.width+j);break}J(t.id,{width:i,height:s,left:r,top:l})}else if(Z){var F,P=(F=K.current)===null||F===void 0?void 0:F.getBoundingClientRect();if(!P)return;var Le=P.left+P.width/2,Se=P.top+P.height/2,Re=Math.atan2(x.clientY-Se,x.clientX-Le)*180/Math.PI,Ae=se.initialRotation+(Re-se.startAngle);x.shiftKey&&(Ae=Math.round(Ae/15)*15),J(t.id,{rotation:Ae})}},[c,S,Z,ee,h,se,D,t.id,t.x,t.left,t.y,t.top,J]),B=(0,w.useCallback)(function(){(c||S||Z)&&V(),d(!1),E(!1),U(!1),ne("")},[c,S,Z,V]);(0,w.useEffect)(function(){if(c||S||Z)return document.addEventListener("mousemove",u),document.addEventListener("mouseup",B),function(){document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",B)}},[c,S,Z,u,B]);var H=function(){var k,m,j,A,i=((k=t.style)===null||k===void 0?void 0:k.stroke)||"#000000",s=((m=t.style)===null||m===void 0?void 0:m.strokeWidth)||2,r=((j=t.style)===null||j===void 0?void 0:j.strokeDasharray)||"",l=((A=t.style)===null||A===void 0?void 0:A.strokeLinecap)||"round";return(0,e.jsx)("svg",{style:{width:"100%",height:"100%"},viewBox:"0 0 ".concat(t.width," ").concat(t.height),preserveAspectRatio:"none",children:(0,e.jsx)("line",{x1:"0",y1:t.height/2,x2:t.width,y2:t.height/2,stroke:i,strokeWidth:s,strokeDasharray:r,strokeLinecap:l})})},we=function(){var k,m,j,A=t.content||"circle",i=((k=t.style)===null||k===void 0?void 0:k.fill)||"#4096ff",s=((m=t.style)===null||m===void 0?void 0:m.stroke)||"#1677ff",r=((j=t.style)===null||j===void 0?void 0:j.strokeWidth)||2,l={width:"100%",height:"100%"};switch(A){case"circle":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:i,stroke:s,strokeWidth:r})});case"triangle":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:i,stroke:s,strokeWidth:r})});case"diamond":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,50 50,90 10,50",fill:i,stroke:s,strokeWidth:r})});case"star":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,5 61,35 95,35 68,57 79,91 50,70 21,91 32,57 5,35 39,35",fill:i,stroke:s,strokeWidth:r})});case"arrow-right":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,20 10,80 70,80 70,90 90,50 70,10 70,20",fill:i,stroke:s,strokeWidth:r})});case"hexagon":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,15 75,15 90,50 75,85 25,85 10,50",fill:i,stroke:s,strokeWidth:r})});case"heart":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,85 C50,85 20,60 20,40 C20,25 30,15 45,15 C47,15 50,20 50,20 C50,20 53,15 55,15 C70,15 80,25 80,40 C80,60 50,85 50,85 Z",fill:i,stroke:s,strokeWidth:r})});case"pentagon":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,35 75,85 25,85 10,35",fill:i,stroke:s,strokeWidth:r})});case"rectangle":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",fill:i,stroke:s,strokeWidth:r})});case"square":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"25",y:"25",width:"50",height:"50",fill:i,stroke:s,strokeWidth:r})});case"ellipse":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:i,stroke:s,strokeWidth:r})});case"rounded-rectangle":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",rx:"8",ry:"8",fill:i,stroke:s,strokeWidth:r})});case"arrow-left":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"90,20 90,80 30,80 30,90 10,50 30,10 30,20",fill:i,stroke:s,strokeWidth:r})});case"arrow-up":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,90 80,90 80,30 90,30 50,10 10,30 20,30",fill:i,stroke:s,strokeWidth:r})});case"arrow-down":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,10 80,10 80,70 90,70 50,90 10,70 20,70",fill:i,stroke:s,strokeWidth:r})});case"double-arrow":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,50 25,35 25,42 75,42 75,35 90,50 75,65 75,58 25,58 25,65",fill:i,stroke:s,strokeWidth:r})});case"cloud":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M75,60 C85,60 90,54 90,46 C90,38 85,32 75,32 C73,24 65,18 55,18 C45,18 37,24 35,32 C27,32 20,38 20,46 C20,54 27,60 35,60 L75,60 Z",fill:i,stroke:s,strokeWidth:r})});case"speech-bubble":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,15 L85,15 C90,15 95,20 95,25 L95,55 C95,60 90,65 85,65 L40,65 L25,80 L35,65 L20,65 C15,65 10,60 10,55 L10,25 C10,20 15,15 20,15 Z",fill:i,stroke:s,strokeWidth:r})});case"thought-bubble":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"55",cy:"35",rx:"32",ry:"25",fill:i,stroke:s,strokeWidth:r}),(0,e.jsx)("circle",{cx:"35",cy:"65",r:"8",fill:i,stroke:s,strokeWidth:r}),(0,e.jsx)("circle",{cx:"25",cy:"75",r:"4",fill:i,stroke:s,strokeWidth:r})]});case"cross":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,10 60,10 60,40 90,40 90,60 60,60 60,90 40,90 40,60 10,60 10,40 40,40",fill:i,stroke:s,strokeWidth:r})});case"plus":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M45,15 L55,15 L55,45 L85,45 L85,55 L55,55 L55,85 L45,85 L45,55 L15,55 L15,45 L45,45 Z",fill:i,stroke:s,strokeWidth:r})});case"minus":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"45",width:"70",height:"10",fill:i,stroke:s,strokeWidth:r})});case"octagon":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"35,15 65,15 85,35 85,65 65,85 35,85 15,65 15,35",fill:i,stroke:s,strokeWidth:r})});case"trapezoid":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"30,25 70,25 85,75 15,75",fill:i,stroke:s,strokeWidth:r})});case"parallelogram":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,65 15,35 75,35 85,65",fill:i,stroke:s,strokeWidth:r})});case"lightning":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"55,10 35,45 50,45 45,90 65,55 50,55",fill:i,stroke:s,strokeWidth:r})});case"gear":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,30 C60,30 70,40 70,50 C70,60 60,70 50,70 C40,70 30,60 30,50 C30,40 40,30 50,30 Z M45,10 L55,10 L57,20 L65,22 L70,15 L77,22 L70,29 L72,37 L82,39 L82,49 L72,51 L70,59 L77,66 L70,73 L65,66 L57,68 L55,78 L45,78 L43,68 L35,66 L30,73 L23,66 L30,59 L28,51 L18,49 L18,39 L28,37 L30,29 L23,22 L30,15 L35,22 L43,20 Z",fill:i,stroke:s,strokeWidth:r})});case"curved-arrow":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,70 Q50,20 80,50 L70,60 L90,70 L70,80 L80,70 Q50,40 30,70",fill:i,stroke:s,strokeWidth:r})});case"circular-arrow":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,15 A35,35 0 1,1 15,50 L25,40 L15,30 L5,40 L15,50 A35,35 0 1,0 50,15",fill:i,stroke:s,strokeWidth:r})});case"u-turn-arrow":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M30,80 L30,40 Q30,20 50,20 Q70,20 70,40 L70,60 L60,50 L80,60 L60,70 L70,60 L70,40 Q70,30 50,30 Q30,30 30,40 L30,80",fill:i,stroke:s,strokeWidth:r})});case"arrow-up-right":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,80 30,70 60,40 40,40 40,20 80,20 80,60 60,60 60,40 30,70",fill:i,stroke:s,strokeWidth:r})});case"arrow-down-left":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"60,20 70,30 40,60 60,60 60,80 20,80 20,40 40,40 40,60 70,30",fill:i,stroke:s,strokeWidth:r})});case"checkmark":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,50 L35,70 L85,20 L75,10 L35,50 L25,40 Z",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"x-mark":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M25,25 L75,75 M75,25 L25,75",fill:"none",stroke:"#ff4d4f",strokeWidth:r*2,strokeLinecap:"round"})});case"warning":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsx)("rect",{x:"45",y:"35",width:"10",height:"25",fill:"white"}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"4",fill:"white"})]});case"info":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#1890ff",stroke:"#096dd9",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"35",r:"4",fill:"white"}),(0,e.jsx)("rect",{x:"45",y:"50",width:"10",height:"25",fill:"white"})]});case"question":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#722ed1",stroke:"#531dab",strokeWidth:r}),(0,e.jsx)("path",{d:"M40,40 Q40,30 50,30 Q60,30 60,40 Q60,45 50,50 L50,55",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round"}),(0,e.jsx)("circle",{cx:"50",cy:"65",r:"3",fill:"white"})]});case"process-rectangle":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"10",y:"30",width:"80",height:"40",fill:i,stroke:s,strokeWidth:r})});case"decision-diamond":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,15 85,50 50,85 15,50",fill:"#faad14",stroke:"#d48806",strokeWidth:r})});case"start-end-oval":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"document":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,15 L70,15 L80,25 L80,85 L20,85 Z M70,15 L70,25 L80,25",fill:i,stroke:s,strokeWidth:r})});case"database":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"50",cy:"25",rx:"35",ry:"12",fill:i,stroke:s,strokeWidth:r}),(0,e.jsx)("path",{d:"M15,25 L15,75 Q15,87 50,87 Q85,87 85,75 L85,25",fill:i,stroke:s,strokeWidth:r}),(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"35",ry:"6",fill:"none",stroke:s,strokeWidth:r}),(0,e.jsx)("ellipse",{cx:"50",cy:"65",rx:"35",ry:"6",fill:"none",stroke:s,strokeWidth:r})]});case"flower":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"30",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"70",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"30",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"50",r:"8",fill:"#faad14",stroke:"#d48806",strokeWidth:r})]});case"leaf":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,80 Q30,60 30,40 Q30,20 50,20 Q70,20 70,40 Q70,60 50,80 Z M50,80 Q50,50 70,40",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"sun":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"16",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsxs)("g",{stroke:"#faad14",strokeWidth:"4",strokeLinecap:"round",children:[(0,e.jsx)("line",{x1:"50",y1:"10",x2:"50",y2:"20"}),(0,e.jsx)("line",{x1:"50",y1:"80",x2:"50",y2:"90"}),(0,e.jsx)("line",{x1:"10",y1:"50",x2:"20",y2:"50"}),(0,e.jsx)("line",{x1:"80",y1:"50",x2:"90",y2:"50"}),(0,e.jsx)("line",{x1:"23",y1:"23",x2:"30",y2:"30"}),(0,e.jsx)("line",{x1:"70",y1:"70",x2:"77",y2:"77"}),(0,e.jsx)("line",{x1:"23",y1:"77",x2:"30",y2:"70"}),(0,e.jsx)("line",{x1:"70",y1:"30",x2:"77",y2:"23"})]})]});case"moon":return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M60,15 A36,36 0 1,0 60,85 A30,30 0 1,1 60,15 Z",fill:"#722ed1",stroke:"#531dab",strokeWidth:r})});case"house":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,15 15,45 15,85 85,85 85,45",fill:i,stroke:s,strokeWidth:r}),(0,e.jsx)("rect",{x:"40",y:"60",width:"20",height:"25",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsx)("rect",{x:"60",y:"40",width:"12",height:"12",fill:"#faad14",stroke:"#d48806",strokeWidth:r})]});case"tree":return(0,e.jsxs)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("rect",{x:"45",y:"70",width:"10",height:"20",fill:"#8b4513",stroke:"#654321",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"40",r:"24",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r}),(0,e.jsx)("circle",{cx:"35",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r}),(0,e.jsx)("circle",{cx:"65",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})]});default:return(0,e.jsx)("svg",{style:l,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:i,stroke:s,strokeWidth:r})})}},$=function(){var k,m,j,A,i,s,r,l,F,P={width:"100%",height:"100%",border:"none",outline:"none",background:"transparent"};switch(t.type){case"text":return(0,e.jsx)("div",{style:z()(z()({},P),{},{color:((k=t.style)===null||k===void 0?void 0:k.color)||"#000000",fontSize:((m=t.style)===null||m===void 0?void 0:m.fontSize)||16,fontWeight:((j=t.style)===null||j===void 0?void 0:j.fontWeight)||"normal",fontStyle:((A=t.style)===null||A===void 0?void 0:A.fontStyle)||"normal",textDecoration:((i=t.style)===null||i===void 0?void 0:i.textDecoration)||"none",textAlign:((s=t.style)===null||s===void 0?void 0:s.textAlign)||"left",backgroundColor:((r=t.style)===null||r===void 0?void 0:r.backgroundColor)||"transparent",display:"flex",alignItems:"center",justifyContent:((l=t.style)===null||l===void 0?void 0:l.textAlign)==="center"?"center":((F=t.style)===null||F===void 0?void 0:F.textAlign)==="right"?"flex-end":"flex-start",padding:"4px",wordBreak:"break-word",cursor:a?"text":"grab"}),contentEditable:a,suppressContentEditableWarning:!0,onBlur:function(Se){J(t.id,{content:Se.target.textContent||""})},children:t.content||"Text"});case"image":return(0,e.jsx)("img",{src:t.content||"",alt:"",style:z()(z()({},P),{},{objectFit:"cover"}),draggable:!1});case"shape":return we();case"line":return H();default:return null}},be=function(){return a?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{position:"absolute",top:-2,left:-2,right:-2,bottom:-2,border:"2px solid #1890ff",borderRadius:"2px",pointerEvents:"none"}}),[{position:"top-left",cursor:"nw-resize"},{position:"top-right",cursor:"ne-resize"},{position:"bottom-left",cursor:"sw-resize"},{position:"bottom-right",cursor:"se-resize"},{position:"top-center",cursor:"n-resize"},{position:"bottom-center",cursor:"s-resize"},{position:"left-center",cursor:"w-resize"},{position:"right-center",cursor:"e-resize"}].map(function(k){var m=k.position,j=k.cursor;return(0,e.jsx)("div",{style:z()({position:"absolute",width:8,height:8,backgroundColor:"#1890ff",border:"1px solid #ffffff",borderRadius:"1px",cursor:j},q(m)),onMouseDown:function(i){return le(i,m)}},m)}),(0,e.jsx)("div",{style:{position:"absolute",top:-20,left:"50%",transform:"translateX(-50%)",width:1,height:16,backgroundColor:"#1890ff",pointerEvents:"none"}}),(0,e.jsx)("div",{style:{position:"absolute",top:-30,left:"50%",transform:"translateX(-50%)",width:14,height:14,backgroundColor:"#1890ff",border:"1px solid #ffffff",borderRadius:"50%",cursor:"grab"},onMouseDown:ae})]}):null},q=function(k){switch(k){case"top-left":return{top:-4,left:-4};case"top-right":return{top:-4,right:-4};case"bottom-left":return{bottom:-4,left:-4};case"bottom-right":return{bottom:-4,right:-4};case"top-center":return{top:-4,left:"50%",transform:"translateX(-50%)"};case"bottom-center":return{bottom:-4,left:"50%",transform:"translateX(-50%)"};case"left-center":return{left:-4,top:"50%",transform:"translateY(-50%)"};case"right-center":return{right:-4,top:"50%",transform:"translateY(-50%)"};default:return{}}};return(0,e.jsxs)("div",{ref:K,id:"ppt-el-".concat(t.id),style:{position:"absolute",left:t.x||t.left,top:t.y||t.top,width:t.width,height:t.height,transform:t.rotation?"rotate(".concat(t.rotation,"deg)"):"none",cursor:c?"grabbing":S?"resizing":Z?"grabbing":t.type==="text"&&a?"text":"grab",userSelect:t.type==="text"&&a?"text":"none",zIndex:a?1e3:1},onMouseDown:je,children:[$(),be()]})},_=ge,C=function(n){var t,a,f=n.slideIndex,p=n.interactive,v=p===void 0?!0:p,c=n.width,d=n.height,y=n.scale,R=n.embedded,S=R===void 0?!1:R,E=n.showBorder,T=E===void 0?!0:E,N=(0,w.useRef)(null),ee=(0,w.useState)({x:0,y:0,visible:!1}),te=o()(ee,2),O=te[0],re=te[1],h=(0,M.L)(),ke=h.slides,de=h.currentSlideIndex,I=h.selectedElementIds,D=h.setSelectedElementIds,ne=h.updateElement,G=h.deleteElement,X=h.copyElements,Z=h.pasteElements,U=h.bringForward,K=h.sendBackward,ue=h.pause,ie=h.resume,se=typeof f=="number"?f:de,W=ke[se],oe=(0,w.useCallback)(function(u){u.target===u.currentTarget&&D([])},[D]),J=(0,w.useCallback)(function(u){u.preventDefault(),re({x:u.clientX,y:u.clientY,visible:!0})},[]),Y=(0,w.useCallback)(function(u,B){B.stopPropagation(),B.ctrlKey||B.metaKey?I.includes(u)?D(I.filter(function(H){return H!==u})):D([].concat(pe()(I),[u])):D([u])},[I,D]),V=(0,w.useCallback)(function(){re(z()(z()({},O),{},{visible:!1}))},[O]),je=(0,w.useCallback)(function(u){u==="copy"?X():u==="paste"?Z():u==="delete"?I.forEach(function(B){return G(B)}):u==="bringForward"?U():u==="sendBackward"&&K(),V()},[V,X,Z,G,U,K,I]),le=(0,w.useCallback)(function(u){var B=document.activeElement,H=B==null?void 0:B.tagName,we=!!(B&&(B.isContentEditable||H==="INPUT"||H==="TEXTAREA"||B.getAttribute("role")==="textbox"||B.closest(".ant-input")||B.closest(".ant-select")||B.closest(".ant-color-picker")));if(!we){(u.key==="Delete"||u.key==="Backspace")&&I.length&&I.forEach(function(m){return G(m)});var $=u.ctrlKey||u.metaKey;if($&&u.key.toLowerCase()==="c"&&I.length&&X(),$&&u.key.toLowerCase()==="v"&&Z(),$&&u.key.toLowerCase()==="z")if(u.preventDefault(),u.shiftKey)try{M.L.temporal.getState().redo()}catch(m){}else try{M.L.temporal.getState().undo()}catch(m){}if($&&u.key.toLowerCase()==="y"){u.preventDefault();try{M.L.temporal.getState().redo()}catch(m){}}if($&&u.key.toLowerCase()==="a"){u.preventDefault();var be=((W==null?void 0:W.elements)||[]).map(function(m){return m.id});D(be)}if($&&u.key.toLowerCase()==="d"&&(u.preventDefault(),I.length&&(X(),Z())),$&&u.key==="]"&&(u.preventDefault(),U()),$&&u.key==="["&&(u.preventDefault(),K()),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(u.key)&&I.length){u.preventDefault();var q=u.shiftKey?10:1,x=u.key==="ArrowLeft"?-q:u.key==="ArrowRight"?q:0,k=u.key==="ArrowUp"?-q:u.key==="ArrowDown"?q:0;ue(),I.forEach(function(m){var j,A,i,s,r=W==null?void 0:W.elements.find(function(P){return P.id===m});if(r){var l=((j=(A=r.x)!==null&&A!==void 0?A:r.left)!==null&&j!==void 0?j:0)+x,F=((i=(s=r.y)!==null&&s!==void 0?s:r.top)!==null&&i!==void 0?i:0)+k;ne(m,{left:l,top:F})}}),ie()}u.key==="Escape"&&D([])}},[I,G,X,Z,W,D,U,K,ue,ie,ne]);(0,w.useEffect)(function(){if(v)return window.addEventListener("keydown",le),function(){window.removeEventListener("keydown",le)}},[le,v]);var ae=(0,e.jsxs)("div",{ref:N,className:"canvas-container",id:S?"ppt-thumb-canvas-".concat(typeof f=="number"?f:de):"ppt-main-canvas",style:{position:"relative",width:c!=null?c:"min(80vw, calc((100vh - 80px) * 0.8 * 5/3))",height:d!=null?d:"min(80vh - 64px, calc(80vw * 3/5))",maxWidth:"1000px",maxHeight:"600px",aspectRatio:"5/3",border:T?"1px solid #e5e7eb":"none",backgroundColor:(W==null||(t=W.background)===null||t===void 0?void 0:t.color)||"#ffffff",backgroundImage:W!=null&&(a=W.background)!==null&&a!==void 0&&a.image?"url(".concat(W.background.image,")"):"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",cursor:"default",pointerEvents:v?"auto":"none"},onClick:v?oe:void 0,onContextMenu:v?J:void 0,children:[W==null?void 0:W.elements.map(function(u){return(0,e.jsx)(_,{element:u,isSelected:v?I.includes(u.id):!1,onSelect:v?Y:function(){}},u.id)}),v&&(0,e.jsx)(me,{x:O.x,y:O.y,visible:O.visible,onClose:V,onSelect:je})]});return S?typeof c=="number"&&typeof d=="number"&&typeof y=="number"?(0,e.jsx)("div",{style:{position:"relative",width:c*y,height:d*y},children:(0,e.jsx)("div",{style:{transform:"scale(".concat(y,")"),transformOrigin:"top left"},children:ae})}):ae:(0,e.jsx)("div",{style:{height:"calc(100vh - 100px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:ae})},ce=C},16864:function(Ce,fe,g){g.d(fe,{L:function(){return _}});var he=g(5574),z=g.n(he),ve=g(13769),pe=g.n(ve),xe=g(97857),o=g.n(xe),w=g(19632),M=g.n(w),Q=g(3341),b=g(23184),e=g(76562),ye=g(782),me=[{id:(0,b.Z)(),background:{color:"#000000",image:"https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1200&q=60"},elements:[{id:(0,b.Z)(),type:"shape",content:"rounded-rectangle",x:80,y:140,width:640,height:180,style:{fill:"rgba(255,255,255,0.85)",stroke:"transparent",strokeWidth:0}},{id:(0,b.Z)(),type:"text",content:"\u7CBE\u7F8E\u6F14\u793A\u6A21\u677F",x:100,y:160,width:600,height:70,style:{fontSize:44,fontWeight:"bold",color:"#111111",textAlign:"center"}},{id:(0,b.Z)(),type:"text",content:"\u56FE\u6587\u5C55\u793A \xB7 \u6781\u7B80\u98CE\u683C",x:100,y:230,width:600,height:50,style:{fontSize:20,color:"#555555",textAlign:"center"}}]},{id:(0,b.Z)(),background:{color:"#f7f9fc"},elements:[{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?auto=format&fit=crop&w=1000&q=60",x:60,y:80,width:360,height:240,style:{}},{id:(0,b.Z)(),type:"shape",content:"rounded-rectangle",x:440,y:80,width:300,height:240,style:{fill:"#ffffff",stroke:"#e0e4ef",strokeWidth:1}},{id:(0,b.Z)(),type:"text",content:"\u4EA7\u54C1\u4EAE\u70B9",x:460,y:100,width:260,height:40,style:{fontSize:26,fontWeight:"bold",color:"#111111"}},{id:(0,b.Z)(),type:"text",content:"\u2022 \u9AD8\u8D28\u611F\u89C6\u89C9",x:460,y:150,width:260,height:28,style:{fontSize:16,color:"#444444"}},{id:(0,b.Z)(),type:"text",content:"\u2022 \u54CD\u5E94\u5F0F\u5E03\u5C40",x:460,y:182,width:260,height:28,style:{fontSize:16,color:"#444444"}},{id:(0,b.Z)(),type:"text",content:"\u2022 \u6613\u4E8E\u7F16\u8F91",x:460,y:214,width:260,height:28,style:{fontSize:16,color:"#444444"}}]},{id:(0,b.Z)(),background:{color:"#ffffff"},elements:[{id:(0,b.Z)(),type:"text",content:"\u56FE\u7247\u96C6\u9526",x:60,y:50,width:680,height:50,style:{fontSize:32,fontWeight:"bold",color:"#111111"}},{id:(0,b.Z)(),type:"shape",content:"rectangle",x:60,y:100,width:120,height:4,style:{fill:"#1677ff",stroke:"transparent",strokeWidth:0}},{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=60",x:60,y:140,width:200,height:140,style:{}},{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=60",x:300,y:140,width:200,height:140,style:{}},{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1487412912498-0447578fcca8?auto=format&fit=crop&w=800&q=60",x:540,y:140,width:200,height:140,style:{}}]}],ge=["left","top"],_=(0,Q.U)()((0,ye.tJ)((0,e.O)(function(C,ce){return{slides:me,currentSlideIndex:0,selectedElementIds:[],name:"\u7CBE\u7F8EPPT\u6A21\u677F",copiedElements:[],addSlide:function(){C(function(n){return{slides:[].concat(M()(n.slides),[{id:(0,b.Z)(),elements:[]}]),currentSlideIndex:n.slides.length}})},deleteSlide:function(n){C(function(t){return{slides:t.slides.filter(function(a,f){return f!==n}),currentSlideIndex:t.currentSlideIndex>=n?Math.max(0,t.currentSlideIndex-1):t.currentSlideIndex}})},setCurrentSlideIndex:function(n){C({currentSlideIndex:n,selectedElementIds:[]})},updateCurrentSlide:function(n){C(function(t){return{slides:t.slides.map(function(a,f){return f===t.currentSlideIndex?o()(o()({},a),n):a})}})},addElement:function(n){C(function(t){var a=o()(o()({},n),{},{id:(0,b.Z)(),x:n.left,y:n.top});delete a.left,delete a.top;var f=t.slides.map(function(p,v){return v!==t.currentSlideIndex?p:o()(o()({},p),{},{elements:[].concat(M()(p.elements),[a])})});return{slides:f,selectedElementIds:[a.id]}})},updateElement:function(n,t){C(function(a){return{slides:a.slides.map(function(f,p){return p!==a.currentSlideIndex?f:o()(o()({},f),{},{elements:f.elements.map(function(v){if(v.id!==n)return v;var c=t,d=c.left,y=c.top,R=pe()(c,ge),S=R;return d!==void 0&&(S.x=d),y!==void 0&&(S.y=y),o()(o()({},v),S)})})})}})},deleteElement:function(n){C(function(t){return{slides:t.slides.map(function(a,f){return f!==t.currentSlideIndex?a:o()(o()({},a),{},{elements:a.elements.filter(function(p){return p.id!==n})})}),selectedElementIds:t.selectedElementIds.filter(function(a){return a!==n})}})},setSelectedElementIds:function(n){C({selectedElementIds:n})},copyElements:function(){var n=ce(),t=n.slides,a=n.currentSlideIndex,f=n.selectedElementIds,p=t[a];if(p){var v=p.elements.filter(function(c){return f.includes(c.id)});C({copiedElements:v})}},pasteElements:function(){var n=ce(),t=n.slides,a=n.currentSlideIndex,f=n.copiedElements;if(f.length){var p=f.map(function(v){var c,d;return o()(o()({},v),{},{id:(0,b.Z)(),x:((c=v.x)!==null&&c!==void 0?c:v.left)+20,y:((d=v.y)!==null&&d!==void 0?d:v.top)+20})});C(function(v){return{slides:v.slides.map(function(c,d){return d!==a?c:o()(o()({},c),{},{elements:[].concat(M()(c.elements),M()(p))})}),selectedElementIds:p.map(function(c){return c.id})}})}},bringForward:function(){C(function(n){var t=n.slides,a=n.currentSlideIndex,f=n.selectedElementIds;if(f.length!==1)return n;var p=t[a],v=f[0],c=p.elements.findIndex(function(E){return E.id===v});if(c<p.elements.length-1){var d=M()(p.elements),y=d.splice(c,1),R=z()(y,1),S=R[0];return d.splice(c+1,0,S),o()(o()({},n),{},{slides:t.map(function(E,T){return T===a?o()(o()({},E),{},{elements:d}):E})})}return n})},sendBackward:function(){C(function(n){var t=n.slides,a=n.currentSlideIndex,f=n.selectedElementIds;if(f.length!==1)return n;var p=t[a],v=f[0],c=p.elements.findIndex(function(E){return E.id===v});if(c>0){var d=M()(p.elements),y=d.splice(c,1),R=z()(y,1),S=R[0];return d.splice(c-1,0,S),o()(o()({},n),{},{slides:t.map(function(E,T){return T===a?o()(o()({},E),{},{elements:d}):E})})}return n})},pause:function(){_.temporal.getState().pause()},resume:function(){_.temporal.getState().resume()},setName:function(n){C({name:n})},loadState:function(n){C(function(t){var a;return o()(o()(o()({},t),n),{},{name:(a=n.name)!==null&&a!==void 0?a:t.name})})},addAnimation:function(n,t){C(function(a){return{slides:a.slides.map(function(f,p){if(p!==a.currentSlideIndex)return f;var v=null,c=f.elements.map(function(S){if(S.id!==n)return S;var E=o()({},S),T=Array.isArray(E.animations)?E.animations:[],N=o()(o()({},t),{},{id:(0,b.Z)()});return v=N.id,E.animations=[].concat(M()(T),[N]),E}),d;if(Array.isArray(f.timeline)?d=M()(f.timeline):d=[],v){var y={elementId:n,animationId:v};if(t.startMode==="withPrevious")if(d.length>0){var R=d[d.length-1];d[d.length-1]=o()(o()({},R),{},{animationRefs:[].concat(M()(R.animationRefs),[y])})}else d.push({id:(0,b.Z)(),title:"\u6B65\u9AA4 ".concat(d.length+1),trigger:"auto",animationRefs:[y]});else d.push({id:(0,b.Z)(),title:"\u6B65\u9AA4 ".concat(d.length+1),trigger:t.startMode==="onClick"?"onClick":"auto",animationRefs:[y]})}return o()(o()({},f),{},{elements:c,timeline:d})})}})},updateAnimation:function(n,t,a){C(function(f){return{slides:f.slides.map(function(p,v){return v!==f.currentSlideIndex?p:o()(o()({},p),{},{elements:p.elements.map(function(c){if(c.id!==n)return c;var d=Array.isArray(c.animations)?c.animations:[];return o()(o()({},c),{},{animations:d.map(function(y){return y.id===t?o()(o()(o()({},y),a),{},{options:o()(o()({},y.options),a.options)}):y})})})})})}})},removeAnimation:function(n,t){C(function(a){return{slides:a.slides.map(function(f,p){if(p!==a.currentSlideIndex)return f;var v=f.elements.map(function(d){if(d.id!==n)return d;var y=Array.isArray(d.animations)?d.animations:[];return o()(o()({},d),{},{animations:y.filter(function(R){return R.id!==t})})}),c=f.timeline;return Array.isArray(c)&&(c=c.map(function(d){return o()(o()({},d),{},{animationRefs:d.animationRefs.filter(function(y){return!(y.elementId===n&&y.animationId===t)})})}).filter(function(d){return d.animationRefs.length>0})),o()(o()({},f),{},{elements:v,timeline:c})})}})},reorderAnimations:function(n,t,a){C(function(f){return{slides:f.slides.map(function(p,v){return v!==f.currentSlideIndex?p:o()(o()({},p),{},{elements:p.elements.map(function(c){if(c.id!==n)return c;var d=Array.isArray(c.animations)?M()(c.animations):[];if(t<0||a<0||t>=d.length||a>=d.length)return c;var y=d.splice(t,1),R=z()(y,1),S=R[0];return d.splice(a,0,S),o()(o()({},c),{},{animations:d})})})})}})}}}),{name:"presentation"}))}}]);
