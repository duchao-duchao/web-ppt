"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[322],{45322:function(Ae,ue,g){g.d(ue,{Z:function(){return ae}});var fe=g(97857),z=g.n(fe),he=g(19632),ve=g.n(he),xe=g(5574),u=g.n(xe),j=g(67294),Z=g(16864),Q=g(50136),b=g(89609),e=g(85893),pe=function(n){var t=n.x,a=n.y,x=n.visible,p=n.onClose,h=n.onSelect,c=(0,e.jsxs)(Q.Z,{onClick:function(A){var I=A.key;return h(I)},children:[(0,e.jsx)(Q.Z.Item,{children:"\u590D\u5236"},"copy"),(0,e.jsx)(Q.Z.Item,{children:"\u7C98\u8D34"},"paste"),(0,e.jsx)(Q.Z.Item,{children:"\u5220\u9664"},"delete"),(0,e.jsx)(Q.Z.Divider,{}),(0,e.jsx)(Q.Z.Item,{children:"\u4E0A\u79FB\u4E00\u5C42"},"bringForward"),(0,e.jsx)(Q.Z.Item,{children:"\u4E0B\u79FB\u4E00\u5C42"},"sendBackward")]});return x?(0,e.jsx)("div",{style:{position:"fixed",left:t,top:a,zIndex:1e3},onMouseLeave:p,children:(0,e.jsx)(b.Z,{overlay:c,open:x,onOpenChange:function(A){return!A&&p()},children:(0,e.jsx)("div",{})})}):null},ye=pe,ge=function(n){var t=n.element,a=n.isSelected,x=n.onSelect,p=(0,j.useState)(!1),h=u()(p,2),c=h[0],y=h[1],A=(0,j.useState)(!1),I=u()(A,2),R=I[0],B=I[1],Y=(0,j.useState)({x:0,y:0}),de=u()(Y,2),_=de[0],ee=de[1],N=(0,j.useState)({x:0,y:0,width:0,height:0,left:0,top:0}),te=u()(N,2),d=te[0],me=te[1],ke=(0,j.useState)(""),E=u()(ke,2),D=E[0],re=E[1],J=(0,j.useState)(!1),T=u()(J,2),M=T[0],O=T[1],X=(0,j.useRef)(null),ce=(0,j.useState)({startAngle:0,initialRotation:0}),ne=u()(ce,2),se=ne[0],S=ne[1],oe=(0,Z.L)(),U=oe.updateElement,K=oe.pause,G=oe.resume,je=(0,j.useCallback)(function(f){if(t.type==="text"&&a&&f.target!==f.currentTarget){f.stopPropagation();return}f.preventDefault(),f.stopPropagation(),K(),y(!0),ee({x:f.clientX,y:f.clientY}),x(t.id,f)},[t.id,t.type,a,x,K]),ie=(0,j.useCallback)(function(f,m){f.preventDefault(),f.stopPropagation(),K(),B(!0),re(m),me({x:f.clientX,y:f.clientY,width:t.width,height:t.height,left:t.x||t.left||0,top:t.y||t.top||0})},[t,K]),le=(0,j.useCallback)(function(f){var m;f.preventDefault(),f.stopPropagation();var v=(m=X.current)===null||m===void 0?void 0:m.getBoundingClientRect();if(v){K(),O(!0);var k=v.left+v.width/2,w=v.top+v.height/2,s=Math.atan2(f.clientY-w,f.clientX-k)*180/Math.PI;S({startAngle:s,initialRotation:t.rotation||0})}},[K,t.rotation]),l=(0,j.useCallback)(function(f){if(c){var m=f.clientX-_.x,v=f.clientY-_.y;U(t.id,{left:(t.x||t.left||0)+m,top:(t.y||t.top||0)+v}),ee({x:f.clientX,y:f.clientY})}else if(R){var k=f.clientX-d.x,w=f.clientY-d.y,s=d.width,o=d.height,r=d.left,i=d.top;switch(D){case"top-left":s=Math.max(20,d.width-k),o=Math.max(20,d.height-w),r=d.left+(d.width-s),i=d.top+(d.height-o);break;case"top-right":s=Math.max(20,d.width+k),o=Math.max(20,d.height-w),i=d.top+(d.height-o);break;case"bottom-left":s=Math.max(20,d.width-k),o=Math.max(20,d.height+w),r=d.left+(d.width-s);break;case"bottom-right":s=Math.max(20,d.width+k),o=Math.max(20,d.height+w);break;case"top-center":o=Math.max(20,d.height-w),i=d.top+(d.height-o);break;case"bottom-center":o=Math.max(20,d.height+w);break;case"left-center":s=Math.max(20,d.width-k),r=d.left+(d.width-s);break;case"right-center":s=Math.max(20,d.width+k);break}U(t.id,{width:s,height:o,left:r,top:i})}else if(M){var F,P=(F=X.current)===null||F===void 0?void 0:F.getBoundingClientRect();if(!P)return;var Ce=P.left+P.width/2,Se=P.top+P.height/2,Re=Math.atan2(f.clientY-Se,f.clientX-Ce)*180/Math.PI,Le=se.initialRotation+(Re-se.startAngle);f.shiftKey&&(Le=Math.round(Le/15)*15),U(t.id,{rotation:Le})}},[c,R,M,_,d,se,D,t.id,t.x,t.left,t.y,t.top,U]),L=(0,j.useCallback)(function(){(c||R||M)&&G(),y(!1),B(!1),O(!1),re("")},[c,R,M,G]);(0,j.useEffect)(function(){if(c||R||M)return document.addEventListener("mousemove",l),document.addEventListener("mouseup",L),function(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",L)}},[c,R,M,l,L]);var V=function(){var m,v,k,w,s=((m=t.style)===null||m===void 0?void 0:m.stroke)||"#000000",o=((v=t.style)===null||v===void 0?void 0:v.strokeWidth)||2,r=((k=t.style)===null||k===void 0?void 0:k.strokeDasharray)||"",i=((w=t.style)===null||w===void 0?void 0:w.strokeLinecap)||"round";return(0,e.jsx)("svg",{style:{width:"100%",height:"100%"},viewBox:"0 0 ".concat(t.width," ").concat(t.height),preserveAspectRatio:"none",children:(0,e.jsx)("line",{x1:"0",y1:t.height/2,x2:t.width,y2:t.height/2,stroke:s,strokeWidth:o,strokeDasharray:r,strokeLinecap:i})})},we=function(){var m,v,k,w=t.content||"circle",s=((m=t.style)===null||m===void 0?void 0:m.fill)||"#4096ff",o=((v=t.style)===null||v===void 0?void 0:v.stroke)||"#1677ff",r=((k=t.style)===null||k===void 0?void 0:k.strokeWidth)||2,i={width:"100%",height:"100%"};switch(w){case"circle":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:s,stroke:o,strokeWidth:r})});case"triangle":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:s,stroke:o,strokeWidth:r})});case"diamond":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,50 50,90 10,50",fill:s,stroke:o,strokeWidth:r})});case"star":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,5 61,35 95,35 68,57 79,91 50,70 21,91 32,57 5,35 39,35",fill:s,stroke:o,strokeWidth:r})});case"arrow-right":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,20 10,80 70,80 70,90 90,50 70,10 70,20",fill:s,stroke:o,strokeWidth:r})});case"hexagon":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,15 75,15 90,50 75,85 25,85 10,50",fill:s,stroke:o,strokeWidth:r})});case"heart":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,85 C50,85 20,60 20,40 C20,25 30,15 45,15 C47,15 50,20 50,20 C50,20 53,15 55,15 C70,15 80,25 80,40 C80,60 50,85 50,85 Z",fill:s,stroke:o,strokeWidth:r})});case"pentagon":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,35 75,85 25,85 10,35",fill:s,stroke:o,strokeWidth:r})});case"rectangle":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",fill:s,stroke:o,strokeWidth:r})});case"square":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"25",y:"25",width:"50",height:"50",fill:s,stroke:o,strokeWidth:r})});case"ellipse":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:s,stroke:o,strokeWidth:r})});case"rounded-rectangle":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",rx:"8",ry:"8",fill:s,stroke:o,strokeWidth:r})});case"arrow-left":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"90,20 90,80 30,80 30,90 10,50 30,10 30,20",fill:s,stroke:o,strokeWidth:r})});case"arrow-up":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,90 80,90 80,30 90,30 50,10 10,30 20,30",fill:s,stroke:o,strokeWidth:r})});case"arrow-down":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,10 80,10 80,70 90,70 50,90 10,70 20,70",fill:s,stroke:o,strokeWidth:r})});case"double-arrow":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,50 25,35 25,42 75,42 75,35 90,50 75,65 75,58 25,58 25,65",fill:s,stroke:o,strokeWidth:r})});case"cloud":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M75,60 C85,60 90,54 90,46 C90,38 85,32 75,32 C73,24 65,18 55,18 C45,18 37,24 35,32 C27,32 20,38 20,46 C20,54 27,60 35,60 L75,60 Z",fill:s,stroke:o,strokeWidth:r})});case"speech-bubble":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,15 L85,15 C90,15 95,20 95,25 L95,55 C95,60 90,65 85,65 L40,65 L25,80 L35,65 L20,65 C15,65 10,60 10,55 L10,25 C10,20 15,15 20,15 Z",fill:s,stroke:o,strokeWidth:r})});case"thought-bubble":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"55",cy:"35",rx:"32",ry:"25",fill:s,stroke:o,strokeWidth:r}),(0,e.jsx)("circle",{cx:"35",cy:"65",r:"8",fill:s,stroke:o,strokeWidth:r}),(0,e.jsx)("circle",{cx:"25",cy:"75",r:"4",fill:s,stroke:o,strokeWidth:r})]});case"cross":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,10 60,10 60,40 90,40 90,60 60,60 60,90 40,90 40,60 10,60 10,40 40,40",fill:s,stroke:o,strokeWidth:r})});case"plus":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M45,15 L55,15 L55,45 L85,45 L85,55 L55,55 L55,85 L45,85 L45,55 L15,55 L15,45 L45,45 Z",fill:s,stroke:o,strokeWidth:r})});case"minus":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"45",width:"70",height:"10",fill:s,stroke:o,strokeWidth:r})});case"octagon":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"35,15 65,15 85,35 85,65 65,85 35,85 15,65 15,35",fill:s,stroke:o,strokeWidth:r})});case"trapezoid":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"30,25 70,25 85,75 15,75",fill:s,stroke:o,strokeWidth:r})});case"parallelogram":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,65 15,35 75,35 85,65",fill:s,stroke:o,strokeWidth:r})});case"lightning":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"55,10 35,45 50,45 45,90 65,55 50,55",fill:s,stroke:o,strokeWidth:r})});case"gear":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,30 C60,30 70,40 70,50 C70,60 60,70 50,70 C40,70 30,60 30,50 C30,40 40,30 50,30 Z M45,10 L55,10 L57,20 L65,22 L70,15 L77,22 L70,29 L72,37 L82,39 L82,49 L72,51 L70,59 L77,66 L70,73 L65,66 L57,68 L55,78 L45,78 L43,68 L35,66 L30,73 L23,66 L30,59 L28,51 L18,49 L18,39 L28,37 L30,29 L23,22 L30,15 L35,22 L43,20 Z",fill:s,stroke:o,strokeWidth:r})});case"curved-arrow":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,70 Q50,20 80,50 L70,60 L90,70 L70,80 L80,70 Q50,40 30,70",fill:s,stroke:o,strokeWidth:r})});case"circular-arrow":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,15 A35,35 0 1,1 15,50 L25,40 L15,30 L5,40 L15,50 A35,35 0 1,0 50,15",fill:s,stroke:o,strokeWidth:r})});case"u-turn-arrow":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M30,80 L30,40 Q30,20 50,20 Q70,20 70,40 L70,60 L60,50 L80,60 L60,70 L70,60 L70,40 Q70,30 50,30 Q30,30 30,40 L30,80",fill:s,stroke:o,strokeWidth:r})});case"arrow-up-right":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,80 30,70 60,40 40,40 40,20 80,20 80,60 60,60 60,40 30,70",fill:s,stroke:o,strokeWidth:r})});case"arrow-down-left":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"60,20 70,30 40,60 60,60 60,80 20,80 20,40 40,40 40,60 70,30",fill:s,stroke:o,strokeWidth:r})});case"checkmark":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,50 L35,70 L85,20 L75,10 L35,50 L25,40 Z",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"x-mark":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M25,25 L75,75 M75,25 L25,75",fill:"none",stroke:"#ff4d4f",strokeWidth:r*2,strokeLinecap:"round"})});case"warning":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsx)("rect",{x:"45",y:"35",width:"10",height:"25",fill:"white"}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"4",fill:"white"})]});case"info":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#1890ff",stroke:"#096dd9",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"35",r:"4",fill:"white"}),(0,e.jsx)("rect",{x:"45",y:"50",width:"10",height:"25",fill:"white"})]});case"question":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#722ed1",stroke:"#531dab",strokeWidth:r}),(0,e.jsx)("path",{d:"M40,40 Q40,30 50,30 Q60,30 60,40 Q60,45 50,50 L50,55",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round"}),(0,e.jsx)("circle",{cx:"50",cy:"65",r:"3",fill:"white"})]});case"process-rectangle":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"10",y:"30",width:"80",height:"40",fill:s,stroke:o,strokeWidth:r})});case"decision-diamond":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,15 85,50 50,85 15,50",fill:"#faad14",stroke:"#d48806",strokeWidth:r})});case"start-end-oval":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"document":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,15 L70,15 L80,25 L80,85 L20,85 Z M70,15 L70,25 L80,25",fill:s,stroke:o,strokeWidth:r})});case"database":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"50",cy:"25",rx:"35",ry:"12",fill:s,stroke:o,strokeWidth:r}),(0,e.jsx)("path",{d:"M15,25 L15,75 Q15,87 50,87 Q85,87 85,75 L85,25",fill:s,stroke:o,strokeWidth:r}),(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"35",ry:"6",fill:"none",stroke:o,strokeWidth:r}),(0,e.jsx)("ellipse",{cx:"50",cy:"65",rx:"35",ry:"6",fill:"none",stroke:o,strokeWidth:r})]});case"flower":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"30",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"70",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"30",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"50",r:"8",fill:"#faad14",stroke:"#d48806",strokeWidth:r})]});case"leaf":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,80 Q30,60 30,40 Q30,20 50,20 Q70,20 70,40 Q70,60 50,80 Z M50,80 Q50,50 70,40",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"sun":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"16",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsxs)("g",{stroke:"#faad14",strokeWidth:"4",strokeLinecap:"round",children:[(0,e.jsx)("line",{x1:"50",y1:"10",x2:"50",y2:"20"}),(0,e.jsx)("line",{x1:"50",y1:"80",x2:"50",y2:"90"}),(0,e.jsx)("line",{x1:"10",y1:"50",x2:"20",y2:"50"}),(0,e.jsx)("line",{x1:"80",y1:"50",x2:"90",y2:"50"}),(0,e.jsx)("line",{x1:"23",y1:"23",x2:"30",y2:"30"}),(0,e.jsx)("line",{x1:"70",y1:"70",x2:"77",y2:"77"}),(0,e.jsx)("line",{x1:"23",y1:"77",x2:"30",y2:"70"}),(0,e.jsx)("line",{x1:"70",y1:"30",x2:"77",y2:"23"})]})]});case"moon":return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M60,15 A36,36 0 1,0 60,85 A30,30 0 1,1 60,15 Z",fill:"#722ed1",stroke:"#531dab",strokeWidth:r})});case"house":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,15 15,45 15,85 85,85 85,45",fill:s,stroke:o,strokeWidth:r}),(0,e.jsx)("rect",{x:"40",y:"60",width:"20",height:"25",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsx)("rect",{x:"60",y:"40",width:"12",height:"12",fill:"#faad14",stroke:"#d48806",strokeWidth:r})]});case"tree":return(0,e.jsxs)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("rect",{x:"45",y:"70",width:"10",height:"20",fill:"#8b4513",stroke:"#654321",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"40",r:"24",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r}),(0,e.jsx)("circle",{cx:"35",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r}),(0,e.jsx)("circle",{cx:"65",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})]});default:return(0,e.jsx)("svg",{style:i,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:s,stroke:o,strokeWidth:r})})}},$=function(){var m,v,k,w,s,o,r,i,F,P={width:"100%",height:"100%",border:"none",outline:"none",background:"transparent"};switch(t.type){case"text":return(0,e.jsx)("div",{style:z()(z()({},P),{},{color:((m=t.style)===null||m===void 0?void 0:m.color)||"#000000",fontSize:((v=t.style)===null||v===void 0?void 0:v.fontSize)||16,fontWeight:((k=t.style)===null||k===void 0?void 0:k.fontWeight)||"normal",fontStyle:((w=t.style)===null||w===void 0?void 0:w.fontStyle)||"normal",textDecoration:((s=t.style)===null||s===void 0?void 0:s.textDecoration)||"none",textAlign:((o=t.style)===null||o===void 0?void 0:o.textAlign)||"left",backgroundColor:((r=t.style)===null||r===void 0?void 0:r.backgroundColor)||"transparent",display:"flex",alignItems:"center",justifyContent:((i=t.style)===null||i===void 0?void 0:i.textAlign)==="center"?"center":((F=t.style)===null||F===void 0?void 0:F.textAlign)==="right"?"flex-end":"flex-start",padding:"4px",wordBreak:"break-word",cursor:a?"text":"grab"}),contentEditable:a,suppressContentEditableWarning:!0,onBlur:function(Se){U(t.id,{content:Se.target.textContent||""})},children:t.content||"Text"});case"image":return(0,e.jsx)("img",{src:t.content||"",alt:"",style:z()(z()({},P),{},{objectFit:"cover"}),draggable:!1});case"shape":return we();case"line":return V();default:return null}},be=function(){return a?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{position:"absolute",top:-2,left:-2,right:-2,bottom:-2,border:"2px solid #1890ff",borderRadius:"2px",pointerEvents:"none"}}),[{position:"top-left",cursor:"nw-resize"},{position:"top-right",cursor:"ne-resize"},{position:"bottom-left",cursor:"sw-resize"},{position:"bottom-right",cursor:"se-resize"},{position:"top-center",cursor:"n-resize"},{position:"bottom-center",cursor:"s-resize"},{position:"left-center",cursor:"w-resize"},{position:"right-center",cursor:"e-resize"}].map(function(m){var v=m.position,k=m.cursor;return(0,e.jsx)("div",{style:z()({position:"absolute",width:8,height:8,backgroundColor:"#1890ff",border:"1px solid #ffffff",borderRadius:"1px",cursor:k},H(v)),onMouseDown:function(s){return ie(s,v)}},v)}),(0,e.jsx)("div",{style:{position:"absolute",top:-20,left:"50%",transform:"translateX(-50%)",width:1,height:16,backgroundColor:"#1890ff",pointerEvents:"none"}}),(0,e.jsx)("div",{style:{position:"absolute",top:-30,left:"50%",transform:"translateX(-50%)",width:14,height:14,backgroundColor:"#1890ff",border:"1px solid #ffffff",borderRadius:"50%",cursor:"grab"},onMouseDown:le})]}):null},H=function(m){switch(m){case"top-left":return{top:-4,left:-4};case"top-right":return{top:-4,right:-4};case"bottom-left":return{bottom:-4,left:-4};case"bottom-right":return{bottom:-4,right:-4};case"top-center":return{top:-4,left:"50%",transform:"translateX(-50%)"};case"bottom-center":return{bottom:-4,left:"50%",transform:"translateX(-50%)"};case"left-center":return{left:-4,top:"50%",transform:"translateY(-50%)"};case"right-center":return{right:-4,top:"50%",transform:"translateY(-50%)"};default:return{}}};return(0,e.jsxs)("div",{ref:X,style:{position:"absolute",left:t.x||t.left,top:t.y||t.top,width:t.width,height:t.height,transform:t.rotation?"rotate(".concat(t.rotation,"deg)"):"none",cursor:c?"grabbing":R?"resizing":M?"grabbing":t.type==="text"&&a?"text":"grab",userSelect:t.type==="text"&&a?"text":"none",zIndex:a?1e3:1},onMouseDown:je,children:[$(),be()]})},q=ge,W=function(n){var t,a,x=n.slideIndex,p=n.interactive,h=p===void 0?!0:p,c=n.width,y=n.height,A=n.scale,I=n.embedded,R=I===void 0?!1:I,B=n.showBorder,Y=B===void 0?!0:B,de=(0,j.useRef)(null),_=(0,j.useState)({x:0,y:0,visible:!1}),ee=u()(_,2),N=ee[0],te=ee[1],d=(0,Z.L)(),me=d.slides,ke=d.currentSlideIndex,E=d.selectedElementIds,D=d.setSelectedElementIds,re=d.updateElement,J=d.deleteElement,T=d.copyElements,M=d.pasteElements,O=d.bringForward,X=d.sendBackward,ce=d.pause,ne=d.resume,se=typeof x=="number"?x:ke,S=me[se],oe=(0,j.useCallback)(function(l){l.target===l.currentTarget&&D([])},[D]),U=(0,j.useCallback)(function(l){l.preventDefault(),te({x:l.clientX,y:l.clientY,visible:!0})},[]),K=(0,j.useCallback)(function(l,L){L.stopPropagation(),L.ctrlKey||L.metaKey?E.includes(l)?D(E.filter(function(V){return V!==l})):D([].concat(ve()(E),[l])):D([l])},[E,D]),G=(0,j.useCallback)(function(){te(z()(z()({},N),{},{visible:!1}))},[N]),je=(0,j.useCallback)(function(l){l==="copy"?T():l==="paste"?M():l==="delete"?E.forEach(function(L){return J(L)}):l==="bringForward"?O():l==="sendBackward"&&X(),G()},[G,T,M,J,O,X,E]),ie=(0,j.useCallback)(function(l){var L=document.activeElement,V=L==null?void 0:L.tagName,we=!!(L&&(L.isContentEditable||V==="INPUT"||V==="TEXTAREA"||L.getAttribute("role")==="textbox"||L.closest(".ant-input")||L.closest(".ant-select")||L.closest(".ant-color-picker")));if(!we){(l.key==="Delete"||l.key==="Backspace")&&E.length&&E.forEach(function(v){return J(v)});var $=l.ctrlKey||l.metaKey;if($&&l.key.toLowerCase()==="c"&&E.length&&T(),$&&l.key.toLowerCase()==="v"&&M(),$&&l.key.toLowerCase()==="z")if(l.preventDefault(),l.shiftKey)try{Z.L.temporal.getState().redo()}catch(v){}else try{Z.L.temporal.getState().undo()}catch(v){}if($&&l.key.toLowerCase()==="y"){l.preventDefault();try{Z.L.temporal.getState().redo()}catch(v){}}if($&&l.key.toLowerCase()==="a"){l.preventDefault();var be=((S==null?void 0:S.elements)||[]).map(function(v){return v.id});D(be)}if($&&l.key.toLowerCase()==="d"&&(l.preventDefault(),E.length&&(T(),M())),$&&l.key==="]"&&(l.preventDefault(),O()),$&&l.key==="["&&(l.preventDefault(),X()),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(l.key)&&E.length){l.preventDefault();var H=l.shiftKey?10:1,f=l.key==="ArrowLeft"?-H:l.key==="ArrowRight"?H:0,m=l.key==="ArrowUp"?-H:l.key==="ArrowDown"?H:0;ce(),E.forEach(function(v){var k,w,s,o,r=S==null?void 0:S.elements.find(function(P){return P.id===v});if(r){var i=((k=(w=r.x)!==null&&w!==void 0?w:r.left)!==null&&k!==void 0?k:0)+f,F=((s=(o=r.y)!==null&&o!==void 0?o:r.top)!==null&&s!==void 0?s:0)+m;re(v,{left:i,top:F})}}),ne()}l.key==="Escape"&&D([])}},[E,J,T,M,S,D,O,X,ce,ne,re]);(0,j.useEffect)(function(){if(h)return window.addEventListener("keydown",ie),function(){window.removeEventListener("keydown",ie)}},[ie,h]);var le=(0,e.jsxs)("div",{ref:de,className:"canvas-container",style:{position:"relative",width:c!=null?c:"min(80vw, calc((100vh - 80px) * 0.8 * 5/3))",height:y!=null?y:"min(80vh - 64px, calc(80vw * 3/5))",maxWidth:"1000px",maxHeight:"600px",aspectRatio:"5/3",border:Y?"1px solid #e5e7eb":"none",backgroundColor:(S==null||(t=S.background)===null||t===void 0?void 0:t.color)||"#ffffff",backgroundImage:S!=null&&(a=S.background)!==null&&a!==void 0&&a.image?"url(".concat(S.background.image,")"):"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",cursor:"default",pointerEvents:h?"auto":"none"},onClick:h?oe:void 0,onContextMenu:h?U:void 0,children:[S==null?void 0:S.elements.map(function(l){return(0,e.jsx)(q,{element:l,isSelected:h?E.includes(l.id):!1,onSelect:h?K:function(){}},l.id)}),h&&(0,e.jsx)(ye,{x:N.x,y:N.y,visible:N.visible,onClose:G,onSelect:je})]});return R?typeof c=="number"&&typeof y=="number"&&typeof A=="number"?(0,e.jsx)("div",{style:{position:"relative",width:c*A,height:y*A},children:(0,e.jsx)("div",{style:{transform:"scale(".concat(A,")"),transformOrigin:"top left"},children:le})}):le:(0,e.jsx)("div",{style:{height:"calc(100vh - 100px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:le})},ae=W},16864:function(Ae,ue,g){g.d(ue,{L:function(){return q}});var fe=g(5574),z=g.n(fe),he=g(13769),ve=g.n(he),xe=g(97857),u=g.n(xe),j=g(19632),Z=g.n(j),Q=g(3341),b=g(23184),e=g(76562),pe=g(782),ye=[{id:(0,b.Z)(),background:{color:"#000000",image:"https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1200&q=60"},elements:[{id:(0,b.Z)(),type:"shape",content:"rounded-rectangle",x:80,y:140,width:640,height:180,style:{fill:"rgba(255,255,255,0.85)",stroke:"transparent",strokeWidth:0}},{id:(0,b.Z)(),type:"text",content:"\u7CBE\u7F8E\u6F14\u793A\u6A21\u677F",x:100,y:160,width:600,height:70,style:{fontSize:44,fontWeight:"bold",color:"#111111",textAlign:"center"}},{id:(0,b.Z)(),type:"text",content:"\u56FE\u6587\u5C55\u793A \xB7 \u6781\u7B80\u98CE\u683C",x:100,y:230,width:600,height:50,style:{fontSize:20,color:"#555555",textAlign:"center"}}]},{id:(0,b.Z)(),background:{color:"#f7f9fc"},elements:[{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?auto=format&fit=crop&w=1000&q=60",x:60,y:80,width:360,height:240,style:{}},{id:(0,b.Z)(),type:"shape",content:"rounded-rectangle",x:440,y:80,width:300,height:240,style:{fill:"#ffffff",stroke:"#e0e4ef",strokeWidth:1}},{id:(0,b.Z)(),type:"text",content:"\u4EA7\u54C1\u4EAE\u70B9",x:460,y:100,width:260,height:40,style:{fontSize:26,fontWeight:"bold",color:"#111111"}},{id:(0,b.Z)(),type:"text",content:"\u2022 \u9AD8\u8D28\u611F\u89C6\u89C9",x:460,y:150,width:260,height:28,style:{fontSize:16,color:"#444444"}},{id:(0,b.Z)(),type:"text",content:"\u2022 \u54CD\u5E94\u5F0F\u5E03\u5C40",x:460,y:182,width:260,height:28,style:{fontSize:16,color:"#444444"}},{id:(0,b.Z)(),type:"text",content:"\u2022 \u6613\u4E8E\u7F16\u8F91",x:460,y:214,width:260,height:28,style:{fontSize:16,color:"#444444"}}]},{id:(0,b.Z)(),background:{color:"#ffffff"},elements:[{id:(0,b.Z)(),type:"text",content:"\u56FE\u7247\u96C6\u9526",x:60,y:50,width:680,height:50,style:{fontSize:32,fontWeight:"bold",color:"#111111"}},{id:(0,b.Z)(),type:"shape",content:"rectangle",x:60,y:100,width:120,height:4,style:{fill:"#1677ff",stroke:"transparent",strokeWidth:0}},{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=60",x:60,y:140,width:200,height:140,style:{}},{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=60",x:300,y:140,width:200,height:140,style:{}},{id:(0,b.Z)(),type:"image",content:"https://images.unsplash.com/photo-1487412912498-0447578fcca8?auto=format&fit=crop&w=800&q=60",x:540,y:140,width:200,height:140,style:{}}]}],ge=["left","top"],q=(0,Q.U)()((0,pe.tJ)((0,e.O)(function(W,ae){return{slides:ye,currentSlideIndex:0,selectedElementIds:[],name:"\u7CBE\u7F8EPPT\u6A21\u677F",copiedElements:[],addSlide:function(){W(function(n){return{slides:[].concat(Z()(n.slides),[{id:(0,b.Z)(),elements:[]}]),currentSlideIndex:n.slides.length}})},deleteSlide:function(n){W(function(t){return{slides:t.slides.filter(function(a,x){return x!==n}),currentSlideIndex:t.currentSlideIndex>=n?Math.max(0,t.currentSlideIndex-1):t.currentSlideIndex}})},setCurrentSlideIndex:function(n){W({currentSlideIndex:n,selectedElementIds:[]})},updateCurrentSlide:function(n){W(function(t){return{slides:t.slides.map(function(a,x){return x===t.currentSlideIndex?u()(u()({},a),n):a})}})},addElement:function(n){W(function(t){var a=u()(u()({},n),{},{id:(0,b.Z)(),x:n.left,y:n.top});delete a.left,delete a.top;var x=t.slides.map(function(p,h){return h!==t.currentSlideIndex?p:u()(u()({},p),{},{elements:[].concat(Z()(p.elements),[a])})});return{slides:x,selectedElementIds:[a.id]}})},updateElement:function(n,t){W(function(a){return{slides:a.slides.map(function(x,p){return p!==a.currentSlideIndex?x:u()(u()({},x),{},{elements:x.elements.map(function(h){if(h.id!==n)return h;var c=t,y=c.left,A=c.top,I=ve()(c,ge),R=I;return y!==void 0&&(R.x=y),A!==void 0&&(R.y=A),u()(u()({},h),R)})})})}})},deleteElement:function(n){W(function(t){return{slides:t.slides.map(function(a,x){return x!==t.currentSlideIndex?a:u()(u()({},a),{},{elements:a.elements.filter(function(p){return p.id!==n})})}),selectedElementIds:t.selectedElementIds.filter(function(a){return a!==n})}})},setSelectedElementIds:function(n){W({selectedElementIds:n})},copyElements:function(){var n=ae(),t=n.slides,a=n.currentSlideIndex,x=n.selectedElementIds,p=t[a];if(p){var h=p.elements.filter(function(c){return x.includes(c.id)});W({copiedElements:h})}},pasteElements:function(){var n=ae(),t=n.slides,a=n.currentSlideIndex,x=n.copiedElements;if(x.length){var p=x.map(function(h){var c,y;return u()(u()({},h),{},{id:(0,b.Z)(),x:((c=h.x)!==null&&c!==void 0?c:h.left)+20,y:((y=h.y)!==null&&y!==void 0?y:h.top)+20})});W(function(h){return{slides:h.slides.map(function(c,y){return y!==a?c:u()(u()({},c),{},{elements:[].concat(Z()(c.elements),Z()(p))})}),selectedElementIds:p.map(function(c){return c.id})}})}},bringForward:function(){W(function(n){var t=n.slides,a=n.currentSlideIndex,x=n.selectedElementIds;if(x.length!==1)return n;var p=t[a],h=x[0],c=p.elements.findIndex(function(B){return B.id===h});if(c<p.elements.length-1){var y=Z()(p.elements),A=y.splice(c,1),I=z()(A,1),R=I[0];return y.splice(c+1,0,R),u()(u()({},n),{},{slides:t.map(function(B,Y){return Y===a?u()(u()({},B),{},{elements:y}):B})})}return n})},sendBackward:function(){W(function(n){var t=n.slides,a=n.currentSlideIndex,x=n.selectedElementIds;if(x.length!==1)return n;var p=t[a],h=x[0],c=p.elements.findIndex(function(B){return B.id===h});if(c>0){var y=Z()(p.elements),A=y.splice(c,1),I=z()(A,1),R=I[0];return y.splice(c-1,0,R),u()(u()({},n),{},{slides:t.map(function(B,Y){return Y===a?u()(u()({},B),{},{elements:y}):B})})}return n})},pause:function(){q.temporal.getState().pause()},resume:function(){q.temporal.getState().resume()},setName:function(n){W({name:n})},loadState:function(n){W(function(t){var a;return u()(u()(u()({},t),n),{},{name:(a=n.name)!==null&&a!==void 0?a:t.name})})}}}),{name:"presentation"}))}}]);
