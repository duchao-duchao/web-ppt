"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[322],{45322:function(re,U,a){a.d(U,{Z:function(){return j}});var X=a(97857),R=a.n(X),Y=a(19632),_=a.n(Y),F=a(5574),M=a.n(F),x=a(67294),D=a(65337),P=a(50136),N=a(89609),e=a(85893),S=function(h){var r=h.x,y=h.y,C=h.visible,W=h.onClose,L=h.onSelect,k=(0,e.jsxs)(P.Z,{onClick:function(I){var z=I.key;return L(z)},children:[(0,e.jsx)(P.Z.Item,{children:"\u590D\u5236"},"copy"),(0,e.jsx)(P.Z.Item,{children:"\u7C98\u8D34"},"paste"),(0,e.jsx)(P.Z.Item,{children:"\u5220\u9664"},"delete")]});return C?(0,e.jsx)("div",{style:{position:"fixed",left:r,top:y,zIndex:1e3},onMouseLeave:W,children:(0,e.jsx)(N.Z,{overlay:k,open:C,onOpenChange:function(I){return!I&&W()},children:(0,e.jsx)("div",{})})}):null},H=S,B=function(h){var r=h.element,y=h.isSelected,C=h.onSelect,W=(0,x.useState)(!1),L=M()(W,2),k=L[0],A=L[1],I=(0,x.useState)(!1),z=M()(I,2),w=z[0],E=z[1],q=(0,x.useState)({x:0,y:0}),m=M()(q,2),Z=m[0],$=m[1],G=(0,x.useState)({x:0,y:0,width:0,height:0,left:0,top:0}),O=M()(G,2),i=O[0],p=O[1],Q=(0,x.useState)(""),T=M()(Q,2),ee=T[0],te=T[1],se=(0,D.L)(),K=se.updateElement,ne=(0,x.useCallback)(function(l){if(r.type==="text"&&y&&l.target!==l.currentTarget){l.stopPropagation();return}l.preventDefault(),l.stopPropagation(),A(!0),$({x:l.clientX,y:l.clientY}),C(r.id,l)},[r.id,r.type,y,C]),oe=(0,x.useCallback)(function(l,d){l.preventDefault(),l.stopPropagation(),E(!0),te(d),p({x:l.clientX,y:l.clientY,width:r.width,height:r.height,left:r.x||r.left||0,top:r.y||r.top||0})},[r]),J=(0,x.useCallback)(function(l){if(k){var d=l.clientX-Z.x,v=l.clientY-Z.y;K(r.id,{left:(r.x||r.left||0)+d,top:(r.y||r.top||0)+v}),$({x:l.clientX,y:l.clientY})}else if(w){var u=l.clientX-i.x,f=l.clientY-i.y,s=i.width,n=i.height,t=i.left,o=i.top;switch(ee){case"top-left":s=Math.max(20,i.width-u),n=Math.max(20,i.height-f),t=i.left+(i.width-s),o=i.top+(i.height-n);break;case"top-right":s=Math.max(20,i.width+u),n=Math.max(20,i.height-f),o=i.top+(i.height-n);break;case"bottom-left":s=Math.max(20,i.width-u),n=Math.max(20,i.height+f),t=i.left+(i.width-s);break;case"bottom-right":s=Math.max(20,i.width+u),n=Math.max(20,i.height+f);break;case"top-center":n=Math.max(20,i.height-f),o=i.top+(i.height-n);break;case"bottom-center":n=Math.max(20,i.height+f);break;case"left-center":s=Math.max(20,i.width-u),t=i.left+(i.width-s);break;case"right-center":s=Math.max(20,i.width+u);break}K(r.id,{width:s,height:n,left:t,top:o})}},[k,w,Z,i,ee,r.id,r.x,r.left,r.y,r.top,K]),V=(0,x.useCallback)(function(){A(!1),E(!1),te("")},[]);(0,x.useEffect)(function(){if(k||w)return document.addEventListener("mousemove",J),document.addEventListener("mouseup",V),function(){document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",V)}},[k,w,J,V]);var ie=function(){var d,v,u,f,s=((d=r.style)===null||d===void 0?void 0:d.stroke)||"#000000",n=((v=r.style)===null||v===void 0?void 0:v.strokeWidth)||2,t=((u=r.style)===null||u===void 0?void 0:u.strokeDasharray)||"",o=((f=r.style)===null||f===void 0?void 0:f.strokeLinecap)||"round";return(0,e.jsx)("svg",{style:{width:"100%",height:"100%"},viewBox:"0 0 ".concat(r.width," ").concat(r.height),preserveAspectRatio:"none",children:(0,e.jsx)("line",{x1:"0",y1:r.height/2,x2:r.width,y2:r.height/2,stroke:s,strokeWidth:n,strokeDasharray:t,strokeLinecap:o})})},le=function(){var d,v,u,f=r.content||"circle",s=((d=r.style)===null||d===void 0?void 0:d.fill)||"#4096ff",n=((v=r.style)===null||v===void 0?void 0:v.stroke)||"#1677ff",t=((u=r.style)===null||u===void 0?void 0:u.strokeWidth)||2,o={width:"100%",height:"100%"};switch(f){case"circle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:s,stroke:n,strokeWidth:t})});case"triangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:s,stroke:n,strokeWidth:t})});case"diamond":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,50 50,90 10,50",fill:s,stroke:n,strokeWidth:t})});case"star":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,5 61,35 95,35 68,57 79,91 50,70 21,91 32,57 5,35 39,35",fill:s,stroke:n,strokeWidth:t})});case"arrow-right":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,20 10,80 70,80 70,90 90,50 70,10 70,20",fill:s,stroke:n,strokeWidth:t})});case"hexagon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,15 75,15 90,50 75,85 25,85 10,50",fill:s,stroke:n,strokeWidth:t})});case"heart":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,85 C50,85 20,60 20,40 C20,25 30,15 45,15 C47,15 50,20 50,20 C50,20 53,15 55,15 C70,15 80,25 80,40 C80,60 50,85 50,85 Z",fill:s,stroke:n,strokeWidth:t})});case"pentagon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,35 75,85 25,85 10,35",fill:s,stroke:n,strokeWidth:t})});case"rectangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",fill:s,stroke:n,strokeWidth:t})});case"square":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"25",y:"25",width:"50",height:"50",fill:s,stroke:n,strokeWidth:t})});case"ellipse":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:s,stroke:n,strokeWidth:t})});case"rounded-rectangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",rx:"8",ry:"8",fill:s,stroke:n,strokeWidth:t})});case"arrow-left":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"90,20 90,80 30,80 30,90 10,50 30,10 30,20",fill:s,stroke:n,strokeWidth:t})});case"arrow-up":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,90 80,90 80,30 90,30 50,10 10,30 20,30",fill:s,stroke:n,strokeWidth:t})});case"arrow-down":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,10 80,10 80,70 90,70 50,90 10,70 20,70",fill:s,stroke:n,strokeWidth:t})});case"double-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,50 25,35 25,42 75,42 75,35 90,50 75,65 75,58 25,58 25,65",fill:s,stroke:n,strokeWidth:t})});case"cloud":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M75,60 C85,60 90,54 90,46 C90,38 85,32 75,32 C73,24 65,18 55,18 C45,18 37,24 35,32 C27,32 20,38 20,46 C20,54 27,60 35,60 L75,60 Z",fill:s,stroke:n,strokeWidth:t})});case"speech-bubble":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,15 L85,15 C90,15 95,20 95,25 L95,55 C95,60 90,65 85,65 L40,65 L25,80 L35,65 L20,65 C15,65 10,60 10,55 L10,25 C10,20 15,15 20,15 Z",fill:s,stroke:n,strokeWidth:t})});case"thought-bubble":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"55",cy:"35",rx:"32",ry:"25",fill:s,stroke:n,strokeWidth:t}),(0,e.jsx)("circle",{cx:"35",cy:"65",r:"8",fill:s,stroke:n,strokeWidth:t}),(0,e.jsx)("circle",{cx:"25",cy:"75",r:"4",fill:s,stroke:n,strokeWidth:t})]});case"cross":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,10 60,10 60,40 90,40 90,60 60,60 60,90 40,90 40,60 10,60 10,40 40,40",fill:s,stroke:n,strokeWidth:t})});case"plus":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M45,15 L55,15 L55,45 L85,45 L85,55 L55,55 L55,85 L45,85 L45,55 L15,55 L15,45 L45,45 Z",fill:s,stroke:n,strokeWidth:t})});case"minus":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"45",width:"70",height:"10",fill:s,stroke:n,strokeWidth:t})});case"octagon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"35,15 65,15 85,35 85,65 65,85 35,85 15,65 15,35",fill:s,stroke:n,strokeWidth:t})});case"trapezoid":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"30,25 70,25 85,75 15,75",fill:s,stroke:n,strokeWidth:t})});case"parallelogram":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,65 15,35 75,35 85,65",fill:s,stroke:n,strokeWidth:t})});case"lightning":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"55,10 35,45 50,45 45,90 65,55 50,55",fill:s,stroke:n,strokeWidth:t})});case"gear":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,30 C60,30 70,40 70,50 C70,60 60,70 50,70 C40,70 30,60 30,50 C30,40 40,30 50,30 Z M45,10 L55,10 L57,20 L65,22 L70,15 L77,22 L70,29 L72,37 L82,39 L82,49 L72,51 L70,59 L77,66 L70,73 L65,66 L57,68 L55,78 L45,78 L43,68 L35,66 L30,73 L23,66 L30,59 L28,51 L18,49 L18,39 L28,37 L30,29 L23,22 L30,15 L35,22 L43,20 Z",fill:s,stroke:n,strokeWidth:t})});case"curved-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,70 Q50,20 80,50 L70,60 L90,70 L70,80 L80,70 Q50,40 30,70",fill:s,stroke:n,strokeWidth:t})});case"circular-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,15 A35,35 0 1,1 15,50 L25,40 L15,30 L5,40 L15,50 A35,35 0 1,0 50,15",fill:s,stroke:n,strokeWidth:t})});case"u-turn-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M30,80 L30,40 Q30,20 50,20 Q70,20 70,40 L70,60 L60,50 L80,60 L60,70 L70,60 L70,40 Q70,30 50,30 Q30,30 30,40 L30,80",fill:s,stroke:n,strokeWidth:t})});case"arrow-up-right":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,80 30,70 60,40 40,40 40,20 80,20 80,60 60,60 60,40 30,70",fill:s,stroke:n,strokeWidth:t})});case"arrow-down-left":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"60,20 70,30 40,60 60,60 60,80 20,80 20,40 40,40 40,60 70,30",fill:s,stroke:n,strokeWidth:t})});case"checkmark":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,50 L35,70 L85,20 L75,10 L35,50 L25,40 Z",fill:"#52c41a",stroke:"#389e0d",strokeWidth:t})});case"x-mark":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M25,25 L75,75 M75,25 L25,75",fill:"none",stroke:"#ff4d4f",strokeWidth:t*2,strokeLinecap:"round"})});case"warning":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:"#faad14",stroke:"#d48806",strokeWidth:t}),(0,e.jsx)("rect",{x:"45",y:"35",width:"10",height:"25",fill:"white"}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"4",fill:"white"})]});case"info":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#1890ff",stroke:"#096dd9",strokeWidth:t}),(0,e.jsx)("circle",{cx:"50",cy:"35",r:"4",fill:"white"}),(0,e.jsx)("rect",{x:"45",y:"50",width:"10",height:"25",fill:"white"})]});case"question":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#722ed1",stroke:"#531dab",strokeWidth:t}),(0,e.jsx)("path",{d:"M40,40 Q40,30 50,30 Q60,30 60,40 Q60,45 50,50 L50,55",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round"}),(0,e.jsx)("circle",{cx:"50",cy:"65",r:"3",fill:"white"})]});case"process-rectangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"10",y:"30",width:"80",height:"40",fill:s,stroke:n,strokeWidth:t})});case"decision-diamond":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,15 85,50 50,85 15,50",fill:"#faad14",stroke:"#d48806",strokeWidth:t})});case"start-end-oval":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:"#52c41a",stroke:"#389e0d",strokeWidth:t})});case"document":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,15 L70,15 L80,25 L80,85 L20,85 Z M70,15 L70,25 L80,25",fill:s,stroke:n,strokeWidth:t})});case"database":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"50",cy:"25",rx:"35",ry:"12",fill:s,stroke:n,strokeWidth:t}),(0,e.jsx)("path",{d:"M15,25 L15,75 Q15,87 50,87 Q85,87 85,75 L85,25",fill:s,stroke:n,strokeWidth:t}),(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"35",ry:"6",fill:"none",stroke:n,strokeWidth:t}),(0,e.jsx)("ellipse",{cx:"50",cy:"65",rx:"35",ry:"6",fill:"none",stroke:n,strokeWidth:t})]});case"flower":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"30",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:t}),(0,e.jsx)("circle",{cx:"70",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:t}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:t}),(0,e.jsx)("circle",{cx:"30",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:t}),(0,e.jsx)("circle",{cx:"50",cy:"50",r:"8",fill:"#faad14",stroke:"#d48806",strokeWidth:t})]});case"leaf":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,80 Q30,60 30,40 Q30,20 50,20 Q70,20 70,40 Q70,60 50,80 Z M50,80 Q50,50 70,40",fill:"#52c41a",stroke:"#389e0d",strokeWidth:t})});case"sun":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"16",fill:"#faad14",stroke:"#d48806",strokeWidth:t}),(0,e.jsxs)("g",{stroke:"#faad14",strokeWidth:"4",strokeLinecap:"round",children:[(0,e.jsx)("line",{x1:"50",y1:"10",x2:"50",y2:"20"}),(0,e.jsx)("line",{x1:"50",y1:"80",x2:"50",y2:"90"}),(0,e.jsx)("line",{x1:"10",y1:"50",x2:"20",y2:"50"}),(0,e.jsx)("line",{x1:"80",y1:"50",x2:"90",y2:"50"}),(0,e.jsx)("line",{x1:"23",y1:"23",x2:"30",y2:"30"}),(0,e.jsx)("line",{x1:"70",y1:"70",x2:"77",y2:"77"}),(0,e.jsx)("line",{x1:"23",y1:"77",x2:"30",y2:"70"}),(0,e.jsx)("line",{x1:"70",y1:"30",x2:"77",y2:"23"})]})]});case"moon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M60,15 A36,36 0 1,0 60,85 A30,30 0 1,1 60,15 Z",fill:"#722ed1",stroke:"#531dab",strokeWidth:t})});case"house":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,15 15,45 15,85 85,85 85,45",fill:s,stroke:n,strokeWidth:t}),(0,e.jsx)("rect",{x:"40",y:"60",width:"20",height:"25",fill:"#faad14",stroke:"#d48806",strokeWidth:t}),(0,e.jsx)("rect",{x:"60",y:"40",width:"12",height:"12",fill:"#faad14",stroke:"#d48806",strokeWidth:t})]});case"tree":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("rect",{x:"45",y:"70",width:"10",height:"20",fill:"#8b4513",stroke:"#654321",strokeWidth:t}),(0,e.jsx)("circle",{cx:"50",cy:"40",r:"24",fill:"#52c41a",stroke:"#389e0d",strokeWidth:t}),(0,e.jsx)("circle",{cx:"35",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:t}),(0,e.jsx)("circle",{cx:"65",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:t})]});default:return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:s,stroke:n,strokeWidth:t})})}},ae=function(){var d,v,u,f,s,n,t,o={width:"100%",height:"100%",border:"none",outline:"none",background:"transparent"};switch(r.type){case"text":return(0,e.jsx)("div",{style:R()(R()({},o),{},{color:((d=r.style)===null||d===void 0?void 0:d.color)||"#000000",fontSize:((v=r.style)===null||v===void 0?void 0:v.fontSize)||16,fontWeight:((u=r.style)===null||u===void 0?void 0:u.fontWeight)||"normal",fontStyle:((f=r.style)===null||f===void 0?void 0:f.fontStyle)||"normal",textAlign:((s=r.style)===null||s===void 0?void 0:s.textAlign)||"left",display:"flex",alignItems:"center",justifyContent:((n=r.style)===null||n===void 0?void 0:n.textAlign)==="center"?"center":((t=r.style)===null||t===void 0?void 0:t.textAlign)==="right"?"flex-end":"flex-start",padding:"4px",wordBreak:"break-word",cursor:y?"text":"grab"}),contentEditable:y,suppressContentEditableWarning:!0,onBlur:function(ue){K(r.id,{content:ue.target.textContent||""})},children:r.content||"Text"});case"image":return(0,e.jsx)("img",{src:r.content||"",alt:"",style:R()(R()({},o),{},{objectFit:"cover"}),draggable:!1});case"shape":return le();case"line":return ie();default:return null}},ce=function(){return y?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{position:"absolute",top:-2,left:-2,right:-2,bottom:-2,border:"2px solid #1890ff",borderRadius:"2px",pointerEvents:"none"}}),[{position:"top-left",cursor:"nw-resize"},{position:"top-right",cursor:"ne-resize"},{position:"bottom-left",cursor:"sw-resize"},{position:"bottom-right",cursor:"se-resize"},{position:"top-center",cursor:"n-resize"},{position:"bottom-center",cursor:"s-resize"},{position:"left-center",cursor:"w-resize"},{position:"right-center",cursor:"e-resize"}].map(function(d){var v=d.position,u=d.cursor;return(0,e.jsx)("div",{style:R()({position:"absolute",width:8,height:8,backgroundColor:"#1890ff",border:"1px solid #ffffff",borderRadius:"1px",cursor:u},de(v)),onMouseDown:function(s){return oe(s,v)}},v)})]}):null},de=function(d){switch(d){case"top-left":return{top:-4,left:-4};case"top-right":return{top:-4,right:-4};case"bottom-left":return{bottom:-4,left:-4};case"bottom-right":return{bottom:-4,right:-4};case"top-center":return{top:-4,left:"50%",transform:"translateX(-50%)"};case"bottom-center":return{bottom:-4,left:"50%",transform:"translateX(-50%)"};case"left-center":return{left:-4,top:"50%",transform:"translateY(-50%)"};case"right-center":return{right:-4,top:"50%",transform:"translateY(-50%)"};default:return{}}};return(0,e.jsxs)("div",{style:{position:"absolute",left:r.x||r.left,top:r.y||r.top,width:r.width,height:r.height,transform:r.rotation?"rotate(".concat(r.rotation,"deg)"):"none",cursor:k?"grabbing":w?"resizing":r.type==="text"&&y?"text":"grab",userSelect:r.type==="text"&&y?"text":"none",zIndex:y?1e3:1},onMouseDown:ne,children:[ae(),ce()]})},c=B,g=function(){var h,r,y=(0,x.useRef)(null),C=(0,x.useState)({x:0,y:0,visible:!1}),W=M()(C,2),L=W[0],k=W[1],A=(0,D.L)(),I=A.slides,z=A.currentSlideIndex,w=A.selectedElementIds,E=A.setSelectedElementIds,q=A.updateElement,m=I[z],Z=(0,x.useCallback)(function(p){p.target===p.currentTarget&&E([])},[E]),$=(0,x.useCallback)(function(p){p.preventDefault(),k({x:p.clientX,y:p.clientY,visible:!0})},[]),G=(0,x.useCallback)(function(p,Q){Q.stopPropagation(),Q.ctrlKey||Q.metaKey?w.includes(p)?E(w.filter(function(T){return T!==p})):E([].concat(_()(w),[p])):E([p])},[w,E]),O=(0,x.useCallback)(function(){k(R()(R()({},L),{},{visible:!1}))},[L]),i=(0,x.useCallback)(function(p){O()},[O]);return(0,e.jsx)("div",{style:{height:"calc(100vh - 80px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,e.jsxs)("div",{ref:y,className:"canvas-container",style:{position:"relative",width:"min(80vw, calc((100vh - 80px) * 0.8 * 5/3))",height:"min(80vh - 64px, calc(80vw * 3/5))",maxWidth:"1000px",maxHeight:"600px",aspectRatio:"5/3",border:"1px solid #e5e7eb",backgroundColor:(m==null||(h=m.background)===null||h===void 0?void 0:h.color)||"#ffffff",backgroundImage:m!=null&&(r=m.background)!==null&&r!==void 0&&r.image?"url(".concat(m.background.image,")"):"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",cursor:"default"},onClick:Z,onContextMenu:$,children:[m==null?void 0:m.elements.map(function(p){return(0,e.jsx)(c,{element:p,isSelected:w.includes(p.id),onSelect:G},p.id)}),(0,e.jsx)(H,{x:L.x,y:L.y,visible:L.visible,onClose:O,onSelect:i})]})})},j=g},65337:function(re,U,a){a.d(U,{L:function(){return e}});var X=a(13769),R=a.n(X),Y=a(97857),_=a.n(Y),F=a(19632),M=a.n(F),x=a(3341),D=a(23184),P=a(76562),N=["left","top"],e=(0,x.U)()((0,P.O)(function(S,H){return{slides:[{id:(0,D.Z)(),elements:[]}],currentSlideIndex:0,selectedElementIds:[],addSlide:function(){S(function(c){return{slides:[].concat(M()(c.slides),[{id:(0,D.Z)(),elements:[]}]),currentSlideIndex:c.slides.length}})},deleteSlide:function(c){S(function(g){return{slides:g.slides.filter(function(j,b){return b!==c}),currentSlideIndex:g.currentSlideIndex>=c?Math.max(0,g.currentSlideIndex-1):g.currentSlideIndex}})},setCurrentSlideIndex:function(c){S({currentSlideIndex:c,selectedElementIds:[]})},updateCurrentSlide:function(c){S(function(g){return{slides:g.slides.map(function(j,b){return b===g.currentSlideIndex?_()(_()({},j),c):j})}})},addElement:function(c){S(function(g){var j=_()(_()({},c),{},{id:(0,D.Z)(),x:c.left,y:c.top});delete j.left,delete j.top;var b=g.slides.map(function(h,r){return r!==g.currentSlideIndex?h:_()(_()({},h),{},{elements:[].concat(M()(h.elements),[j])})});return{slides:b,selectedElementIds:[j.id]}})},updateElement:function(c,g){S(function(j){return{slides:j.slides.map(function(b,h){return h!==j.currentSlideIndex?b:_()(_()({},b),{},{elements:b.elements.map(function(r){if(r.id!==c)return r;var y=g,C=y.left,W=y.top,L=R()(y,N),k=L;return C!==void 0&&(k.x=C),W!==void 0&&(k.y=W),_()(_()({},r),k)})})})}})},setSelectedElementIds:function(c){S({selectedElementIds:c})},loadState:function(c){S(c)}}}))}}]);
