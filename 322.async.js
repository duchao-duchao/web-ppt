"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[322],{45322:function(je,le,y){y.d(le,{Z:function(){return L}});var ae=y(97857),I=y.n(ae),de=y(19632),ce=y.n(de),ue=y(5574),u=y.n(ue),m=y(67294),D=y(65337),P=y(50136),_=y(89609),e=y(85893),he=function(l){var t=l.x,d=l.y,x=l.visible,v=l.onClose,c=l.onSelect,p=(0,e.jsxs)(P.Z,{onClick:function(A){var R=A.key;return c(R)},children:[(0,e.jsx)(P.Z.Item,{children:"\u590D\u5236"},"copy"),(0,e.jsx)(P.Z.Item,{children:"\u7C98\u8D34"},"paste"),(0,e.jsx)(P.Z.Item,{children:"\u5220\u9664"},"delete"),(0,e.jsx)(P.Z.Divider,{}),(0,e.jsx)(P.Z.Item,{children:"\u4E0A\u79FB\u4E00\u5C42"},"bringForward"),(0,e.jsx)(P.Z.Item,{children:"\u4E0B\u79FB\u4E00\u5C42"},"sendBackward")]});return x?(0,e.jsx)("div",{style:{position:"fixed",left:t,top:d,zIndex:1e3},onMouseLeave:v,children:(0,e.jsx)(_.Z,{overlay:p,open:x,onOpenChange:function(A){return!A&&v()},children:(0,e.jsx)("div",{})})}):null},pe=he,N=function(l){var t=l.element,d=l.isSelected,x=l.onSelect,v=(0,m.useState)(!1),c=u()(v,2),p=c[0],S=c[1],A=(0,m.useState)(!1),R=u()(A,2),b=R[0],Z=R[1],fe=(0,m.useState)({x:0,y:0}),se=u()(fe,2),J=se[0],G=se[1],K=(0,m.useState)({x:0,y:0,width:0,height:0,left:0,top:0}),V=u()(K,2),a=V[0],xe=V[1],ve=(0,m.useState)(""),W=u()(ve,2),z=W[0],ye=W[1],F=(0,m.useState)(!1),Q=u()(F,2),M=Q[0],H=Q[1],X=(0,m.useRef)(null),me=(0,m.useState)({startAngle:0,initialRotation:0}),B=u()(me,2),q=B[0],ge=B[1],ee=(0,D.L)(),O=ee.updateElement,T=ee.pause,Y=ee.resume,te=(0,m.useCallback)(function(h){if(t.type==="text"&&d&&h.target!==h.currentTarget){h.stopPropagation();return}h.preventDefault(),h.stopPropagation(),T(),S(!0),G({x:h.clientX,y:h.clientY}),x(t.id,h)},[t.id,t.type,d,x,T]),f=(0,m.useCallback)(function(h,g){h.preventDefault(),h.stopPropagation(),T(),Z(!0),ye(g),xe({x:h.clientX,y:h.clientY,width:t.width,height:t.height,left:t.x||t.left||0,top:t.y||t.top||0})},[t,T]),E=(0,m.useCallback)(function(h){var g;h.preventDefault(),h.stopPropagation();var k=(g=X.current)===null||g===void 0?void 0:g.getBoundingClientRect();if(k){T(),H(!0);var j=k.left+k.width/2,w=k.top+k.height/2,n=Math.atan2(h.clientY-w,h.clientX-j)*180/Math.PI;ge({startAngle:n,initialRotation:t.rotation||0})}},[T,t.rotation]),$=(0,m.useCallback)(function(h){if(p){var g=h.clientX-J.x,k=h.clientY-J.y;O(t.id,{left:(t.x||t.left||0)+g,top:(t.y||t.top||0)+k}),G({x:h.clientX,y:h.clientY})}else if(b){var j=h.clientX-a.x,w=h.clientY-a.y,n=a.width,s=a.height,r=a.left,o=a.top;switch(z){case"top-left":n=Math.max(20,a.width-j),s=Math.max(20,a.height-w),r=a.left+(a.width-n),o=a.top+(a.height-s);break;case"top-right":n=Math.max(20,a.width+j),s=Math.max(20,a.height-w),o=a.top+(a.height-s);break;case"bottom-left":n=Math.max(20,a.width-j),s=Math.max(20,a.height+w),r=a.left+(a.width-n);break;case"bottom-right":n=Math.max(20,a.width+j),s=Math.max(20,a.height+w);break;case"top-center":s=Math.max(20,a.height-w),o=a.top+(a.height-s);break;case"bottom-center":s=Math.max(20,a.height+w);break;case"left-center":n=Math.max(20,a.width-j),r=a.left+(a.width-n);break;case"right-center":n=Math.max(20,a.width+j);break}O(t.id,{width:n,height:s,left:r,top:o})}else if(M){var ie,U=(ie=X.current)===null||ie===void 0?void 0:ie.getBoundingClientRect();if(!U)return;var Se=U.left+U.width/2,Ee=U.top+U.height/2,Ce=Math.atan2(h.clientY-Ee,h.clientX-Se)*180/Math.PI,_e=q.initialRotation+(Ce-q.startAngle);h.shiftKey&&(_e=Math.round(_e/15)*15),O(t.id,{rotation:_e})}},[p,b,M,J,a,q,z,t.id,t.x,t.left,t.y,t.top,O]),re=(0,m.useCallback)(function(){(p||b||M)&&Y(),S(!1),Z(!1),H(!1),ye("")},[p,b,M,Y]);(0,m.useEffect)(function(){if(p||b||M)return document.addEventListener("mousemove",$),document.addEventListener("mouseup",re),function(){document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",re)}},[p,b,M,$,re]);var oe=function(){var g,k,j,w,n=((g=t.style)===null||g===void 0?void 0:g.stroke)||"#000000",s=((k=t.style)===null||k===void 0?void 0:k.strokeWidth)||2,r=((j=t.style)===null||j===void 0?void 0:j.strokeDasharray)||"",o=((w=t.style)===null||w===void 0?void 0:w.strokeLinecap)||"round";return(0,e.jsx)("svg",{style:{width:"100%",height:"100%"},viewBox:"0 0 ".concat(t.width," ").concat(t.height),preserveAspectRatio:"none",children:(0,e.jsx)("line",{x1:"0",y1:t.height/2,x2:t.width,y2:t.height/2,stroke:n,strokeWidth:s,strokeDasharray:r,strokeLinecap:o})})},ke=function(){var g,k,j,w=t.content||"circle",n=((g=t.style)===null||g===void 0?void 0:g.fill)||"#4096ff",s=((k=t.style)===null||k===void 0?void 0:k.stroke)||"#1677ff",r=((j=t.style)===null||j===void 0?void 0:j.strokeWidth)||2,o={width:"100%",height:"100%"};switch(w){case"circle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:n,stroke:s,strokeWidth:r})});case"triangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:n,stroke:s,strokeWidth:r})});case"diamond":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,50 50,90 10,50",fill:n,stroke:s,strokeWidth:r})});case"star":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,5 61,35 95,35 68,57 79,91 50,70 21,91 32,57 5,35 39,35",fill:n,stroke:s,strokeWidth:r})});case"arrow-right":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,20 10,80 70,80 70,90 90,50 70,10 70,20",fill:n,stroke:s,strokeWidth:r})});case"hexagon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,15 75,15 90,50 75,85 25,85 10,50",fill:n,stroke:s,strokeWidth:r})});case"heart":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,85 C50,85 20,60 20,40 C20,25 30,15 45,15 C47,15 50,20 50,20 C50,20 53,15 55,15 C70,15 80,25 80,40 C80,60 50,85 50,85 Z",fill:n,stroke:s,strokeWidth:r})});case"pentagon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,10 90,35 75,85 25,85 10,35",fill:n,stroke:s,strokeWidth:r})});case"rectangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",fill:n,stroke:s,strokeWidth:r})});case"square":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"25",y:"25",width:"50",height:"50",fill:n,stroke:s,strokeWidth:r})});case"ellipse":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:n,stroke:s,strokeWidth:r})});case"rounded-rectangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"30",width:"70",height:"40",rx:"8",ry:"8",fill:n,stroke:s,strokeWidth:r})});case"arrow-left":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"90,20 90,80 30,80 30,90 10,50 30,10 30,20",fill:n,stroke:s,strokeWidth:r})});case"arrow-up":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,90 80,90 80,30 90,30 50,10 10,30 20,30",fill:n,stroke:s,strokeWidth:r})});case"arrow-down":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"20,10 80,10 80,70 90,70 50,90 10,70 20,70",fill:n,stroke:s,strokeWidth:r})});case"double-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"10,50 25,35 25,42 75,42 75,35 90,50 75,65 75,58 25,58 25,65",fill:n,stroke:s,strokeWidth:r})});case"cloud":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M75,60 C85,60 90,54 90,46 C90,38 85,32 75,32 C73,24 65,18 55,18 C45,18 37,24 35,32 C27,32 20,38 20,46 C20,54 27,60 35,60 L75,60 Z",fill:n,stroke:s,strokeWidth:r})});case"speech-bubble":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,15 L85,15 C90,15 95,20 95,25 L95,55 C95,60 90,65 85,65 L40,65 L25,80 L35,65 L20,65 C15,65 10,60 10,55 L10,25 C10,20 15,15 20,15 Z",fill:n,stroke:s,strokeWidth:r})});case"thought-bubble":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"55",cy:"35",rx:"32",ry:"25",fill:n,stroke:s,strokeWidth:r}),(0,e.jsx)("circle",{cx:"35",cy:"65",r:"8",fill:n,stroke:s,strokeWidth:r}),(0,e.jsx)("circle",{cx:"25",cy:"75",r:"4",fill:n,stroke:s,strokeWidth:r})]});case"cross":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,10 60,10 60,40 90,40 90,60 60,60 60,90 40,90 40,60 10,60 10,40 40,40",fill:n,stroke:s,strokeWidth:r})});case"plus":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M45,15 L55,15 L55,45 L85,45 L85,55 L55,55 L55,85 L45,85 L45,55 L15,55 L15,45 L45,45 Z",fill:n,stroke:s,strokeWidth:r})});case"minus":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"15",y:"45",width:"70",height:"10",fill:n,stroke:s,strokeWidth:r})});case"octagon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"35,15 65,15 85,35 85,65 65,85 35,85 15,65 15,35",fill:n,stroke:s,strokeWidth:r})});case"trapezoid":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"30,25 70,25 85,75 15,75",fill:n,stroke:s,strokeWidth:r})});case"parallelogram":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"25,65 15,35 75,35 85,65",fill:n,stroke:s,strokeWidth:r})});case"lightning":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"55,10 35,45 50,45 45,90 65,55 50,55",fill:n,stroke:s,strokeWidth:r})});case"gear":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,30 C60,30 70,40 70,50 C70,60 60,70 50,70 C40,70 30,60 30,50 C30,40 40,30 50,30 Z M45,10 L55,10 L57,20 L65,22 L70,15 L77,22 L70,29 L72,37 L82,39 L82,49 L72,51 L70,59 L77,66 L70,73 L65,66 L57,68 L55,78 L45,78 L43,68 L35,66 L30,73 L23,66 L30,59 L28,51 L18,49 L18,39 L28,37 L30,29 L23,22 L30,15 L35,22 L43,20 Z",fill:n,stroke:s,strokeWidth:r})});case"curved-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,70 Q50,20 80,50 L70,60 L90,70 L70,80 L80,70 Q50,40 30,70",fill:n,stroke:s,strokeWidth:r})});case"circular-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,15 A35,35 0 1,1 15,50 L25,40 L15,30 L5,40 L15,50 A35,35 0 1,0 50,15",fill:n,stroke:s,strokeWidth:r})});case"u-turn-arrow":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M30,80 L30,40 Q30,20 50,20 Q70,20 70,40 L70,60 L60,50 L80,60 L60,70 L70,60 L70,40 Q70,30 50,30 Q30,30 30,40 L30,80",fill:n,stroke:s,strokeWidth:r})});case"arrow-up-right":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"40,80 30,70 60,40 40,40 40,20 80,20 80,60 60,60 60,40 30,70",fill:n,stroke:s,strokeWidth:r})});case"arrow-down-left":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"60,20 70,30 40,60 60,60 60,80 20,80 20,40 40,40 40,60 70,30",fill:n,stroke:s,strokeWidth:r})});case"checkmark":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M15,50 L35,70 L85,20 L75,10 L35,50 L25,40 Z",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"x-mark":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M25,25 L75,75 M75,25 L25,75",fill:"none",stroke:"#ff4d4f",strokeWidth:r*2,strokeLinecap:"round"})});case"warning":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,10 90,80 10,80",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsx)("rect",{x:"45",y:"35",width:"10",height:"25",fill:"white"}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"4",fill:"white"})]});case"info":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#1890ff",stroke:"#096dd9",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"35",r:"4",fill:"white"}),(0,e.jsx)("rect",{x:"45",y:"50",width:"10",height:"25",fill:"white"})]});case"question":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:"#722ed1",stroke:"#531dab",strokeWidth:r}),(0,e.jsx)("path",{d:"M40,40 Q40,30 50,30 Q60,30 60,40 Q60,45 50,50 L50,55",fill:"none",stroke:"white",strokeWidth:"4",strokeLinecap:"round"}),(0,e.jsx)("circle",{cx:"50",cy:"65",r:"3",fill:"white"})]});case"process-rectangle":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("rect",{x:"10",y:"30",width:"80",height:"40",fill:n,stroke:s,strokeWidth:r})});case"decision-diamond":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("polygon",{points:"50,15 85,50 50,85 15,50",fill:"#faad14",stroke:"#d48806",strokeWidth:r})});case"start-end-oval":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"40",ry:"25",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"document":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M20,15 L70,15 L80,25 L80,85 L20,85 Z M70,15 L70,25 L80,25",fill:n,stroke:s,strokeWidth:r})});case"database":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("ellipse",{cx:"50",cy:"25",rx:"35",ry:"12",fill:n,stroke:s,strokeWidth:r}),(0,e.jsx)("path",{d:"M15,25 L15,75 Q15,87 50,87 Q85,87 85,75 L85,25",fill:n,stroke:s,strokeWidth:r}),(0,e.jsx)("ellipse",{cx:"50",cy:"50",rx:"35",ry:"6",fill:"none",stroke:s,strokeWidth:r}),(0,e.jsx)("ellipse",{cx:"50",cy:"65",rx:"35",ry:"6",fill:"none",stroke:s,strokeWidth:r})]});case"flower":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"30",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"70",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"70",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"30",cy:"50",r:"12",fill:"#ff85c0",stroke:"#f759ab",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"50",r:"8",fill:"#faad14",stroke:"#d48806",strokeWidth:r})]});case"leaf":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M50,80 Q30,60 30,40 Q30,20 50,20 Q70,20 70,40 Q70,60 50,80 Z M50,80 Q50,50 70,40",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})});case"sun":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("circle",{cx:"50",cy:"50",r:"16",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsxs)("g",{stroke:"#faad14",strokeWidth:"4",strokeLinecap:"round",children:[(0,e.jsx)("line",{x1:"50",y1:"10",x2:"50",y2:"20"}),(0,e.jsx)("line",{x1:"50",y1:"80",x2:"50",y2:"90"}),(0,e.jsx)("line",{x1:"10",y1:"50",x2:"20",y2:"50"}),(0,e.jsx)("line",{x1:"80",y1:"50",x2:"90",y2:"50"}),(0,e.jsx)("line",{x1:"23",y1:"23",x2:"30",y2:"30"}),(0,e.jsx)("line",{x1:"70",y1:"70",x2:"77",y2:"77"}),(0,e.jsx)("line",{x1:"23",y1:"77",x2:"30",y2:"70"}),(0,e.jsx)("line",{x1:"70",y1:"30",x2:"77",y2:"23"})]})]});case"moon":return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("path",{d:"M60,15 A36,36 0 1,0 60,85 A30,30 0 1,1 60,15 Z",fill:"#722ed1",stroke:"#531dab",strokeWidth:r})});case"house":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("polygon",{points:"50,15 15,45 15,85 85,85 85,45",fill:n,stroke:s,strokeWidth:r}),(0,e.jsx)("rect",{x:"40",y:"60",width:"20",height:"25",fill:"#faad14",stroke:"#d48806",strokeWidth:r}),(0,e.jsx)("rect",{x:"60",y:"40",width:"12",height:"12",fill:"#faad14",stroke:"#d48806",strokeWidth:r})]});case"tree":return(0,e.jsxs)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,e.jsx)("rect",{x:"45",y:"70",width:"10",height:"20",fill:"#8b4513",stroke:"#654321",strokeWidth:r}),(0,e.jsx)("circle",{cx:"50",cy:"40",r:"24",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r}),(0,e.jsx)("circle",{cx:"35",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r}),(0,e.jsx)("circle",{cx:"65",cy:"50",r:"16",fill:"#52c41a",stroke:"#389e0d",strokeWidth:r})]});default:return(0,e.jsx)("svg",{style:o,viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(0,e.jsx)("circle",{cx:"50",cy:"50",r:"40",fill:n,stroke:s,strokeWidth:r})})}},be=function(){var g,k,j,w,n,s,r,o={width:"100%",height:"100%",border:"none",outline:"none",background:"transparent"};switch(t.type){case"text":return(0,e.jsx)("div",{style:I()(I()({},o),{},{color:((g=t.style)===null||g===void 0?void 0:g.color)||"#000000",fontSize:((k=t.style)===null||k===void 0?void 0:k.fontSize)||16,fontWeight:((j=t.style)===null||j===void 0?void 0:j.fontWeight)||"normal",fontStyle:((w=t.style)===null||w===void 0?void 0:w.fontStyle)||"normal",textAlign:((n=t.style)===null||n===void 0?void 0:n.textAlign)||"left",display:"flex",alignItems:"center",justifyContent:((s=t.style)===null||s===void 0?void 0:s.textAlign)==="center"?"center":((r=t.style)===null||r===void 0?void 0:r.textAlign)==="right"?"flex-end":"flex-start",padding:"4px",wordBreak:"break-word",cursor:d?"text":"grab"}),contentEditable:d,suppressContentEditableWarning:!0,onBlur:function(U){O(t.id,{content:U.target.textContent||""})},children:t.content||"Text"});case"image":return(0,e.jsx)("img",{src:t.content||"",alt:"",style:I()(I()({},o),{},{objectFit:"cover"}),draggable:!1});case"shape":return ke();case"line":return oe();default:return null}},we=function(){return d?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{position:"absolute",top:-2,left:-2,right:-2,bottom:-2,border:"2px solid #1890ff",borderRadius:"2px",pointerEvents:"none"}}),[{position:"top-left",cursor:"nw-resize"},{position:"top-right",cursor:"ne-resize"},{position:"bottom-left",cursor:"sw-resize"},{position:"bottom-right",cursor:"se-resize"},{position:"top-center",cursor:"n-resize"},{position:"bottom-center",cursor:"s-resize"},{position:"left-center",cursor:"w-resize"},{position:"right-center",cursor:"e-resize"}].map(function(g){var k=g.position,j=g.cursor;return(0,e.jsx)("div",{style:I()({position:"absolute",width:8,height:8,backgroundColor:"#1890ff",border:"1px solid #ffffff",borderRadius:"1px",cursor:j},Le(k)),onMouseDown:function(n){return f(n,k)}},k)}),(0,e.jsx)("div",{style:{position:"absolute",top:-20,left:"50%",transform:"translateX(-50%)",width:1,height:16,backgroundColor:"#1890ff",pointerEvents:"none"}}),(0,e.jsx)("div",{style:{position:"absolute",top:-30,left:"50%",transform:"translateX(-50%)",width:14,height:14,backgroundColor:"#1890ff",border:"1px solid #ffffff",borderRadius:"50%",cursor:"grab"},onMouseDown:E})]}):null},Le=function(g){switch(g){case"top-left":return{top:-4,left:-4};case"top-right":return{top:-4,right:-4};case"bottom-left":return{bottom:-4,left:-4};case"bottom-right":return{bottom:-4,right:-4};case"top-center":return{top:-4,left:"50%",transform:"translateX(-50%)"};case"bottom-center":return{bottom:-4,left:"50%",transform:"translateX(-50%)"};case"left-center":return{left:-4,top:"50%",transform:"translateY(-50%)"};case"right-center":return{right:-4,top:"50%",transform:"translateY(-50%)"};default:return{}}};return(0,e.jsxs)("div",{ref:X,style:{position:"absolute",left:t.x||t.left,top:t.y||t.top,width:t.width,height:t.height,transform:t.rotation?"rotate(".concat(t.rotation,"deg)"):"none",cursor:p?"grabbing":b?"resizing":M?"grabbing":t.type==="text"&&d?"text":"grab",userSelect:t.type==="text"&&d?"text":"none",zIndex:d?1e3:1},onMouseDown:te,children:[be(),we()]})},C=N,ne=function(l){var t,d,x=l.slideIndex,v=l.interactive,c=v===void 0?!0:v,p=l.width,S=l.height,A=l.scale,R=l.embedded,b=R===void 0?!1:R,Z=l.showBorder,fe=Z===void 0?!0:Z,se=(0,m.useRef)(null),J=(0,m.useState)({x:0,y:0,visible:!1}),G=u()(J,2),K=G[0],V=G[1],a=(0,D.L)(),xe=a.slides,ve=a.currentSlideIndex,W=a.selectedElementIds,z=a.setSelectedElementIds,ye=a.updateElement,F=a.deleteElement,Q=a.copyElements,M=a.pasteElements,H=a.bringForward,X=a.sendBackward,me=typeof x=="number"?x:ve,B=xe[me],q=(0,m.useCallback)(function(f){f.target===f.currentTarget&&z([])},[z]),ge=(0,m.useCallback)(function(f){f.preventDefault(),V({x:f.clientX,y:f.clientY,visible:!0})},[]),ee=(0,m.useCallback)(function(f,E){E.stopPropagation(),E.ctrlKey||E.metaKey?W.includes(f)?z(W.filter(function($){return $!==f})):z([].concat(ce()(W),[f])):z([f])},[W,z]),O=(0,m.useCallback)(function(){V(I()(I()({},K),{},{visible:!1}))},[K]),T=(0,m.useCallback)(function(f){f==="copy"?Q():f==="paste"?M():f==="delete"?W.forEach(function(E){return F(E)}):f==="bringForward"?H():f==="sendBackward"&&X(),O()},[O,Q,M,F,H,X,W]),Y=(0,m.useCallback)(function(f){var E=document.activeElement,$=E==null?void 0:E.tagName,re=!!(E&&(E.isContentEditable||$==="INPUT"||$==="TEXTAREA"||E.getAttribute("role")==="textbox"||E.closest(".ant-input")||E.closest(".ant-select")||E.closest(".ant-color-picker")));if(!re){(f.key==="Delete"||f.key==="Backspace")&&W.length&&W.forEach(function(ke){return F(ke)});var oe=f.ctrlKey||f.metaKey;oe&&f.key.toLowerCase()==="c"&&W.length&&Q(),oe&&f.key.toLowerCase()==="v"&&M()}},[W,F,Q,M]);(0,m.useEffect)(function(){if(c)return window.addEventListener("keydown",Y),function(){window.removeEventListener("keydown",Y)}},[Y,c]);var te=(0,e.jsxs)("div",{ref:se,className:"canvas-container",style:{position:"relative",width:p!=null?p:"min(80vw, calc((100vh - 80px) * 0.8 * 5/3))",height:S!=null?S:"min(80vh - 64px, calc(80vw * 3/5))",maxWidth:"1000px",maxHeight:"600px",aspectRatio:"5/3",border:fe?"1px solid #e5e7eb":"none",backgroundColor:(B==null||(t=B.background)===null||t===void 0?void 0:t.color)||"#ffffff",backgroundImage:B!=null&&(d=B.background)!==null&&d!==void 0&&d.image?"url(".concat(B.background.image,")"):"none",backgroundSize:"cover",backgroundPosition:"center",overflow:"hidden",cursor:"default",pointerEvents:c?"auto":"none"},onClick:c?q:void 0,onContextMenu:c?ge:void 0,children:[B==null?void 0:B.elements.map(function(f){return(0,e.jsx)(C,{element:f,isSelected:c?W.includes(f.id):!1,onSelect:c?ee:function(){}},f.id)}),c&&(0,e.jsx)(pe,{x:K.x,y:K.y,visible:K.visible,onClose:O,onSelect:T})]});return b?typeof p=="number"&&typeof S=="number"&&typeof A=="number"?(0,e.jsx)("div",{style:{position:"relative",width:p*A,height:S*A},children:(0,e.jsx)("div",{style:{transform:"scale(".concat(A,")"),transformOrigin:"top left"},children:te})}):te:(0,e.jsx)("div",{style:{height:"calc(100vh - 80px)",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:te})},L=ne},65337:function(je,le,y){y.d(le,{L:function(){return N}});var ae=y(5574),I=y.n(ae),de=y(13769),ce=y.n(de),ue=y(97857),u=y.n(ue),m=y(19632),D=y.n(m),P=y(3341),_=y(23184),e=y(76562),he=y(782),pe=["left","top"],N=(0,P.U)()((0,he.tJ)((0,e.O)(function(C,ne){return{slides:[{id:(0,_.Z)(),background:{color:"#000000",image:"https://images.unsplash.com/photo-1506765515384-028b60a970df?auto=format&fit=crop&w=1200&q=60"},elements:[{id:(0,_.Z)(),type:"shape",content:"rounded-rectangle",x:80,y:140,width:640,height:180,style:{fill:"rgba(255,255,255,0.85)",stroke:"transparent",strokeWidth:0}},{id:(0,_.Z)(),type:"text",content:"\u7CBE\u7F8E\u6F14\u793A\u6A21\u677F",x:100,y:160,width:600,height:70,style:{fontSize:44,fontWeight:"bold",color:"#111111",textAlign:"center"}},{id:(0,_.Z)(),type:"text",content:"\u56FE\u6587\u5C55\u793A \xB7 \u6781\u7B80\u98CE\u683C",x:100,y:230,width:600,height:50,style:{fontSize:20,color:"#555555",textAlign:"center"}}]},{id:(0,_.Z)(),background:{color:"#f7f9fc"},elements:[{id:(0,_.Z)(),type:"image",content:"https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?auto=format&fit=crop&w=1000&q=60",x:60,y:80,width:360,height:240,style:{}},{id:(0,_.Z)(),type:"shape",content:"rounded-rectangle",x:440,y:80,width:300,height:240,style:{fill:"#ffffff",stroke:"#e0e4ef",strokeWidth:1}},{id:(0,_.Z)(),type:"text",content:"\u4EA7\u54C1\u4EAE\u70B9",x:460,y:100,width:260,height:40,style:{fontSize:26,fontWeight:"bold",color:"#111111"}},{id:(0,_.Z)(),type:"text",content:"\u2022 \u9AD8\u8D28\u611F\u89C6\u89C9",x:460,y:150,width:260,height:28,style:{fontSize:16,color:"#444444"}},{id:(0,_.Z)(),type:"text",content:"\u2022 \u54CD\u5E94\u5F0F\u5E03\u5C40",x:460,y:182,width:260,height:28,style:{fontSize:16,color:"#444444"}},{id:(0,_.Z)(),type:"text",content:"\u2022 \u6613\u4E8E\u7F16\u8F91",x:460,y:214,width:260,height:28,style:{fontSize:16,color:"#444444"}}]},{id:(0,_.Z)(),background:{color:"#ffffff"},elements:[{id:(0,_.Z)(),type:"text",content:"\u56FE\u7247\u96C6\u9526",x:60,y:50,width:680,height:50,style:{fontSize:32,fontWeight:"bold",color:"#111111"}},{id:(0,_.Z)(),type:"shape",content:"rectangle",x:60,y:100,width:120,height:4,style:{fill:"#1677ff",stroke:"transparent",strokeWidth:0}},{id:(0,_.Z)(),type:"image",content:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=60",x:60,y:140,width:200,height:140,style:{}},{id:(0,_.Z)(),type:"image",content:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=800&q=60",x:300,y:140,width:200,height:140,style:{}},{id:(0,_.Z)(),type:"image",content:"https://images.unsplash.com/photo-1487412912498-0447578fcca8?auto=format&fit=crop&w=800&q=60",x:540,y:140,width:200,height:140,style:{}}]}],currentSlideIndex:0,selectedElementIds:[],name:"\u7CBE\u7F8EPPT\u6A21\u677F",copiedElements:[],addSlide:function(){C(function(i){return{slides:[].concat(D()(i.slides),[{id:(0,_.Z)(),elements:[]}]),currentSlideIndex:i.slides.length}})},deleteSlide:function(i){C(function(l){return{slides:l.slides.filter(function(t,d){return d!==i}),currentSlideIndex:l.currentSlideIndex>=i?Math.max(0,l.currentSlideIndex-1):l.currentSlideIndex}})},setCurrentSlideIndex:function(i){C({currentSlideIndex:i,selectedElementIds:[]})},updateCurrentSlide:function(i){C(function(l){return{slides:l.slides.map(function(t,d){return d===l.currentSlideIndex?u()(u()({},t),i):t})}})},addElement:function(i){C(function(l){var t=u()(u()({},i),{},{id:(0,_.Z)(),x:i.left,y:i.top});delete t.left,delete t.top;var d=l.slides.map(function(x,v){return v!==l.currentSlideIndex?x:u()(u()({},x),{},{elements:[].concat(D()(x.elements),[t])})});return{slides:d,selectedElementIds:[t.id]}})},updateElement:function(i,l){C(function(t){return{slides:t.slides.map(function(d,x){return x!==t.currentSlideIndex?d:u()(u()({},d),{},{elements:d.elements.map(function(v){if(v.id!==i)return v;var c=l,p=c.left,S=c.top,A=ce()(c,pe),R=A;return p!==void 0&&(R.x=p),S!==void 0&&(R.y=S),u()(u()({},v),R)})})})}})},deleteElement:function(i){C(function(l){return{slides:l.slides.map(function(t,d){return d!==l.currentSlideIndex?t:u()(u()({},t),{},{elements:t.elements.filter(function(x){return x.id!==i})})}),selectedElementIds:l.selectedElementIds.filter(function(t){return t!==i})}})},setSelectedElementIds:function(i){C({selectedElementIds:i})},copyElements:function(){var i=ne(),l=i.slides,t=i.currentSlideIndex,d=i.selectedElementIds,x=l[t];if(x){var v=x.elements.filter(function(c){return d.includes(c.id)});C({copiedElements:v})}},pasteElements:function(){var i=ne(),l=i.slides,t=i.currentSlideIndex,d=i.copiedElements;if(d.length){var x=d.map(function(v){var c,p;return u()(u()({},v),{},{id:(0,_.Z)(),x:((c=v.x)!==null&&c!==void 0?c:v.left)+20,y:((p=v.y)!==null&&p!==void 0?p:v.top)+20})});C(function(v){return{slides:v.slides.map(function(c,p){return p!==t?c:u()(u()({},c),{},{elements:[].concat(D()(c.elements),D()(x))})}),selectedElementIds:x.map(function(c){return c.id})}})}},bringForward:function(){C(function(i){var l=i.slides,t=i.currentSlideIndex,d=i.selectedElementIds;if(d.length!==1)return i;var x=l[t],v=d[0],c=x.elements.findIndex(function(b){return b.id===v});if(c<x.elements.length-1){var p=D()(x.elements),S=p.splice(c,1),A=I()(S,1),R=A[0];return p.splice(c+1,0,R),u()(u()({},i),{},{slides:l.map(function(b,Z){return Z===t?u()(u()({},b),{},{elements:p}):b})})}return i})},sendBackward:function(){C(function(i){var l=i.slides,t=i.currentSlideIndex,d=i.selectedElementIds;if(d.length!==1)return i;var x=l[t],v=d[0],c=x.elements.findIndex(function(b){return b.id===v});if(c>0){var p=D()(x.elements),S=p.splice(c,1),A=I()(S,1),R=A[0];return p.splice(c-1,0,R),u()(u()({},i),{},{slides:l.map(function(b,Z){return Z===t?u()(u()({},b),{},{elements:p}):b})})}return i})},pause:function(){N.temporal.getState().pause()},resume:function(){N.temporal.getState().resume()},setName:function(i){C({name:i})},loadState:function(i){C(function(l){var t;return u()(u()(u()({},l),i),{},{name:(t=i.name)!==null&&t!==void 0?t:l.name})})}}}),{name:"presentation"}))}}]);
